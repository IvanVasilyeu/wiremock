

<!doctype html>
<html lang="en" class="no-js">
  <head>
    

<meta charset="utf-8">



<!-- begin SEO -->



<!--  -->







<title>Mock API Response Templating | WireMock</title>







<meta name="description" content="Response headers and bodies, as well as proxy URLs, can optionally be rendered using Handlebars templates.">

<meta property="og:locale" content="en-US">
<meta property="og:site_name" content="WireMock">
<meta property="og:title" content="Response Templating">

<meta name="twitter:card" content="summary" />
<meta name="twitter:site" content="WireMock" />
<meta name="twitter:description" content="Response headers and bodies, as well as proxy URLs, can optionally be rendered using Handlebars templates.">


  <link rel="canonical" href="https://wiremock.org/docs/response-templating/">
  <meta property="og:url" content="https://wiremock.org/docs/response-templating/">



  <meta property="og:description" content="Response headers and bodies, as well as proxy URLs, can optionally be rendered using Handlebars templates.">





  

  





  <meta property="og:type" content="article">
  <meta property="article:published_time" content="2023-03-17T17:28:48+00:00">
  
    <link rel="next" href="https://wiremock.org/docs/running-standalone/" title="Running as a Standalone Process">
  
  
    <link rel="prev" href="https://wiremock.org/docs/request-matching/" title="Request Matching">
  





  <script type="application/ld+json">
    {
      "@context" : "http://schema.org",
      "@type" : "Person",
      "name" : "Tom Akehurst",
      "url" : "https://wiremock.org",
      "sameAs" : null
    }
  </script>






<!-- end SEO -->





  <!-- Google Analytics -->
<style>.async-hide { opacity: 0 !important} </style>
<!--<script>(function(a,s,y,n,c,h,i,d,e){s.className+=' '+y;h.start=1*new Date;-->
  <!--h.end=i=function(){s.className=s.className.replace(RegExp(' ?'+y),'')};-->
  <!--(a[n]=a[n]||[]).hide=h;setTimeout(function(){i();h.end=null},c);h.timeout=c;-->
<!--})(window,document.documentElement,'async-hide','dataLayer',4000,-->
  <!--{'GTM-WQTGSSM':true});</script>-->

<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
      (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
    m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-36386229-2', 'auto');
  ga('require', 'GTM-WQTGSSM');
  ga('send', 'pageview');
</script>
<!-- End Google Analytics -->



<script>
    (function(h,o,t,j,a,r){
        h.hj=h.hj||function(){(h.hj.q=h.hj.q||[]).push(arguments)};
        h._hjSettings={hjid:2905132,hjsv:6};
        a=o.getElementsByTagName('head')[0];
        r=o.createElement('script');r.async=1;
        r.src=t+h._hjSettings.hjid+j+h._hjSettings.hjsv;
        a.appendChild(r);
    })(window,document,'https://static.hotjar.com/c/hotjar-','.js?sv=');
</script>

<script>
    (function(c,l,a,r,i,t,y){
        c[a]=c[a]||function(){(c[a].q=c[a].q||[]).push(arguments)};
        t=l.createElement(r);t.async=1;t.src="https://www.clarity.ms/tag/"+i+"?ref=bwt";
        y=l.getElementsByTagName(r)[0];y.parentNode.insertBefore(t,y);
    })(window, document, "clarity", "script", "e4hf2fljrd");
</script>


<link href="https://wiremock.org/feed.xml" type="application/atom+xml" rel="alternate" title="WireMock Feed">

<!-- http://t.co/dKP3o1e -->
<meta name="HandheldFriendly" content="True">
<meta name="MobileOptimized" content="320">
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<script>
  document.documentElement.className = document.documentElement.className.replace(/\bno-js\b/g, '') + ' js ';
</script>

<link href="https://fonts.googleapis.com/css?family=Lato|Source+Code+Pro|Cairo" rel="stylesheet">
<link rel="preconnect" href="https://fonts.googleapis.com">
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
<link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@400;500;600;700;800&family=Open+Sans:wght@300;400;500;600;700;800&family=Roboto:wght@400;500;700&family=Ubuntu:wght@400;500;700&display=swap" rel="stylesheet">

<!-- For all browsers -->
<link rel="stylesheet" href="https://wiremock.org/assets/css/main.css">

<meta http-equiv="cleartype" content="on">

<link rel="shortcut icon" type="image/x-icon" href="https://wiremock.org/images/favicon.svg">

    <!-- start custom head snippets -->

<!-- insert favicons. use http://realfavicongenerator.net/ -->

<!-- end custom head snippets -->
  </head>

  <body>
    <!--[if lt IE 9]>
<div class="notice--danger align-center" style="margin: 0;">You are using an <strong>outdated</strong> browser. Please <a href="http://browsehappy.com/">upgrade your browser</a> to improve your experience.</div>
<![endif]-->
    

<style>
  .navlink {
    position: relative !important;
    color: #7d93bd;
    padding-bottom: 0.9rem;
    cursor: pointer;
    font-family: "Ubuntu";
    font-style: normal;
    font-weight: 400;
    font-size: 14px;
  }

  .divSubNav {
    position: relative;
    cursor: default;
    padding: 10px 15px;
    display: none;
    position: absolute;
    content: "";
    left: 0;
    top: 32px;
    width: fit-content;
    background: #FFFFFF;
    box-shadow: 0px -5px 20px rgba(210, 223, 249, 0.5);
  }

  .divSubNav::before {
    position: absolute;
    content: "";
    left: 15px;
    width: 0; 
    height: 0; 
    border-left: 5px solid transparent;
    border-right: 5px solid transparent;
    border-bottom: 7px solid #fff;
    top: -7px;
  }

  .divSubNav a {
    padding: 0 !important;
    margin: 0 0 5px 0;
    width: fit-content !important;
  }

  .divSubNav a:last-child {
    margin-bottom: 0;
  }

  .divSubNav a::before {
    background: none !important;
    
  }

  .navlink:hover > .divSubNav {
    display: block;
  }

  .navlink::before {
    background: unset !important;
  }
  .navHover::before {
    background: unset !important;
  }
</style>

<div class="masthead">
  <div class="masthead__inner-wrap">
    <div class="masthead__menu">
      <a href="/"><img src="https://wiremock.org/images/wireMockLogo.png" style="width: 160px; height: 20px" /></a>
      <nav id="site-nav" class="greedy-nav">
        <!-- <button><div class="navicon"></div></button> -->
        <ul class="visible-links">
          
          
            

            

            
            
            <li class="masthead__menu-item">
              
                <span class="navlink">
                  Docs

                  
                  <div class="divSubNav">
                    
                      <a href="/docs/">
                        WireMock Open Source
                      </a>
                    
                      <a href="https://docs.wiremock.io/getting-started/?utm_source=wiremock.org&utm_medium=masthead_doc-links&utm_campaign=2022_baseline">
                        WireMock Cloud
                      </a>
                    
                      <a href="/studio/docs/">
                        WireMock Studio
                      </a>
                    
                      <a href="https://www.mocklab.io/docs/getting-started/?utm_source=wiremock.org&utm_medium=masthead_doc-links&utm_campaign=2022_baseline">
                        MockLab
                      </a>
                    
                  </div>
                  
                </span>
              
              
            </li>
            
            

          
            

            

            
            
            <li class="masthead__menu-item">
              
                <a class="base_path navHover" href="https://wiremock.org/support" title="Support">
                  Support
                </a>
              
              
            </li>
            
            

          
            

            

            
            
            <li class="masthead__menu-item">
              
                <span class="navlink">
                  Community

                  
                  <div class="divSubNav">
                    
                      <a href="https://github.com/wiremock/wiremock">
                        GitHub
                      </a>
                    
                      <a href="https://join.slack.com/t/wiremock-community/shared_invite/zt-1mkbo0zlx-gxeZdTJ15Kchdt888Fn_1A">
                        Slack
                      </a>
                    
                      <a href="https://community.wiremock.io/">
                        Slack archive
                      </a>
                    
                      <a href="https://github.com/wiremock/wiremock/blob/master/CONTRIBUTING.md">
                        Contributing
                      </a>
                    
                      <a href="/external-resources">
                        Resources
                      </a>
                    
                  </div>
                  
                </span>
              
              
            </li>
            
            

          

          <li class="masthead__menu-item">
            <a class="navHover" href="https://wiremock.io?utm_source=wiremock.org&utm_medium=masthead&utm_campaign=homepage_2022_baseline" title="WireMock Cloud">
              <img src="/images/wiremock-cloud/wiremock_cloud_logo.png" alt="WireMock Cloud" style="vertical-align: middle;height: 28px"/>
            </a>
          </li>
        </ul>
        
      </nav>
      
      <img id="hamburgerMenuIcon" class="hamburgerMenuIcon" src="https://wiremock.org/images/hamburgerMenuIcon.svg" />
      <div id="overlay-menu" class="overlay-menu"></div>
      <div class="mobile-menu-wrapper">
        <img id="closeMenuIcon" class="closeMenuIcon" src="https://wiremock.org/images/closeMenuIcon.svg" />
        <ul>
          <li><a href="/docs">Open Source docs</a></li>
          <li>
            <a href="https://wiremock.io?utm_source=wiremock.org&utm_medium=masthead&utm_campaign=homepage_2022_baseline" title="WireMock Cloud">
              <img src="/images/wiremock-cloud/wiremock_cloud_logo.png" alt="WireMock Cloud" style="vertical-align: middle;height: 28px"/><br>
              WireMock Cloud docs
            </a>
          </li>
          <li><a href="/studio/docs">Studio docs</a></li>
          
          <li><a href="/support">Support</a></li>
          <li><a href="https://github.com/wiremock/wiremock" target="_blank">GitHub</a></li>
          <li><a href="https://github.com/wiremock/wiremock/blob/master/CONTRIBUTING.md" target="_blank">Contributing</a></li>
          <li><a href="/external-resources">Resources</a></li>
        </ul>
      </div>
    </div>
  </div>
</div>


    

<div id="main" class="custom-doc-wrapper" role="main">

  
    

<div class="sidebar">
  <nav class="nav__list">
    <ul class="doc-categories">
      
      
        <li class="doc-category">
          <span class="doc-category__title">Setup</span>
          <ul class="
          doc-category__sub-nav
          
          ">
            
              
              
              
              
              <li class="doc-category__li">
                <a href="/docs/getting-started/">Getting Started</a>
              </li>
            
              
              
              
              
              <li class="doc-category__li">
                <a href="/docs/download-and-installation/">Download and Installation</a>
              </li>
            
              
              
              
              
              <li class="doc-category__li">
                <a href="/docs/running-standalone/">Running as a Standalone Process</a>
              </li>
            
              
              
              
              
              <li class="doc-category__li">
                <a href="/docs/docker/">Running in Docker</a>
              </li>
            
              
              
              
              
              <li class="doc-category__li">
                <a href="/docs/android/">Running on Android</a>
              </li>
            
              
              
              
              
              <li class="doc-category__li">
                <a href="/docs/spring-boot/">Using with Spring Boot</a>
              </li>
            
          </ul>
        </li>
      
      
        <li class="doc-category">
          <span class="doc-category__title">Configuration</span>
          <ul class="
          doc-category__sub-nav
          
          ">
            
              
              
              
              
              <li class="doc-category__li">
                <a href="/docs/https/">HTTPS</a>
              </li>
            
              
              
              
              
              <li class="doc-category__li">
                <a href="/docs/multi-domain-mocking/">Multi-domain Mocking</a>
              </li>
            
          </ul>
        </li>
      
      
        <li class="doc-category">
          <span class="doc-category__title">Java Usage</span>
          <ul class="
          doc-category__sub-nav
          
          ">
            
              
              
              
              
              <li class="doc-category__li">
                <a href="/docs/junit-jupiter/">JUnit 5+ Jupiter</a>
              </li>
            
              
              
              
              
              <li class="doc-category__li">
                <a href="/docs/junit-extensions/">JUnit 4 and Vintage</a>
              </li>
            
              
              
              
              
              <li class="doc-category__li">
                <a href="/docs/java-usage/">Plain Java</a>
              </li>
            
              
              
              
              
              <li class="doc-category__li">
                <a href="/docs/configuration/">Java configuration</a>
              </li>
            
              
              
              
              
              <li class="doc-category__li">
                <a href="/docs/running-without-http-server/">Running without the HTTP Server</a>
              </li>
            
          </ul>
        </li>
      
      
        <li class="doc-category">
          <span class="doc-category__title">Stubbing & Verifying</span>
          <ul class="
          doc-category__sub-nav
          doc-category__sub-nav--active
          ">
            
              
              
              
              
              <li class="doc-category__li">
                <a href="/docs/stubbing/">Stubbing</a>
              </li>
            
              
              
              
              
              <li class="doc-category__li">
                <a href="/docs/request-matching/">Request Matching</a>
              </li>
            
              
              
              
              
              <li class="doc-category__li doc-category__li--selected">
                <a href="/docs/response-templating/">Response Templating</a>
              </li>
            
              
              
              
              
              <li class="doc-category__li">
                <a href="/docs/simulating-faults/">Simulating Faults</a>
              </li>
            
              
              
              
              
              <li class="doc-category__li">
                <a href="/docs/stateful-behaviour/">Stateful Behaviour</a>
              </li>
            
              
              
              
              
              <li class="doc-category__li">
                <a href="/docs/proxying/">Proxying</a>
              </li>
            
              
              
              
              
              <li class="doc-category__li">
                <a href="/docs/verifying/">Verifying</a>
              </li>
            
          </ul>
        </li>
      
      
        <li class="doc-category">
          <span class="doc-category__title">Record & Playback</span>
          <ul class="
          doc-category__sub-nav
          
          ">
            
              
              
              
              
              <li class="doc-category__li">
                <a href="/docs/record-playback/">Record and Playback</a>
              </li>
            
          </ul>
        </li>
      
      
        <li class="doc-category">
          <span class="doc-category__title">Extensibility</span>
          <ul class="
          doc-category__sub-nav
          
          ">
            
              
              
              
              
              <li class="doc-category__li">
                <a href="/docs/extending-wiremock/">Extending WireMock</a>
              </li>
            
              
              
              
              
              <li class="doc-category__li">
                <a href="/docs/stub-metadata/">Stub Metadata</a>
              </li>
            
              
              
              
              
              <li class="doc-category__li">
                <a href="/docs/webhooks-and-callbacks/">Webhooks and Callbacks</a>
              </li>
            
          </ul>
        </li>
      
      
        <li class="doc-category">
          <span class="doc-category__title">Reference</span>
          <ul class="
          doc-category__sub-nav
          
          ">
            
              
              
              
              
              <li class="doc-category__li">
                <a href="/docs/api/">Admin API </a>
              </li>
            
          </ul>
        </li>
      
    </ul>

  </nav>
</div>

  

  

  <article class="page" itemscope itemtype="http://schema.org/CreativeWork">
    
    <meta itemprop="description" content="Response headers and bodies, as well as proxy URLs, can optionally be rendered using Handlebars templates. This enables attributes of the requestto be used in generating the response e.g. to pass the value of a request ID header as a response header orrender an identifier from part of the URL in the response body.">
    <meta itemprop="datePublished" content="March 17, 2023">
    

    <div style="background-color: #f2f2f2;border: #c8c8c8 1px solid;padding: 8px;margin-bottom:32px;">
      <a href="https://join.slack.com/t/wiremock-community/shared_invite/zt-1mkbo0zlx-gxeZdTJ15Kchdt888Fn_1A"><img src="/images/slack-logo-medium.png" alt="Slack logo" style="vertical-align:sub;height:22px;margin-left:7px;margin-right:8px"/></a>
      Need help? Join the <a href="https://join.slack.com/t/wiremock-community/shared_invite/zt-1mkbo0zlx-gxeZdTJ15Kchdt888Fn_1A">WireMock community Slack</a>
    </div>

    <div class="page__inner-wrap">
      <header>
        <h1 class="page__title" itemprop="headline">Response Templating
</h1>
      </header>

      <section class="page__content" itemprop="text">
        <p>Response headers and bodies, as well as proxy URLs, can optionally be rendered using <a href="http://handlebarsjs.com/">Handlebars templates</a>. This enables attributes of the request
to be used in generating the response e.g. to pass the value of a request ID header as a response header or
render an identifier from part of the URL in the response body.</p>

<h2 id="enabling-response-templating">Enabling response templating</h2>

<p>When starting WireMock programmatically, response templating can be enabled by adding <code class="language-plaintext highlighter-rouge">ResponseTemplateTransformer</code> as an extension e.g.</p>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nd">@Rule</span>
<span class="kd">public</span> <span class="nc">WireMockRule</span> <span class="n">wm</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">WireMockRule</span><span class="o">(</span><span class="n">options</span><span class="o">()</span>
    <span class="o">.</span><span class="na">extensions</span><span class="o">(</span><span class="k">new</span> <span class="nc">ResponseTemplateTransformer</span><span class="o">(</span><span class="kc">false</span><span class="o">))</span>
<span class="o">);</span>
</code></pre></div></div>

<p>The boolean constructor parameter indicates whether the extension should be applied globally. If true, all stub mapping responses will be rendered as templates prior
to being served.</p>

<p>Otherwise the transformer will need to be specified on each stub mapping by its name <code class="language-plaintext highlighter-rouge">response-template</code>:</p>

<h3 id="java">Java</h3>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">wm</span><span class="o">.</span><span class="na">stubFor</span><span class="o">(</span><span class="n">get</span><span class="o">(</span><span class="n">urlPathEqualTo</span><span class="o">(</span><span class="s">"/templated"</span><span class="o">))</span>
  <span class="o">.</span><span class="na">willReturn</span><span class="o">(</span><span class="n">aResponse</span><span class="o">()</span>
      <span class="o">.</span><span class="na">withBody</span><span class="o">(</span><span class="s">"{{request.path.[0]}}"</span><span class="o">)</span>
      <span class="o">.</span><span class="na">withTransformers</span><span class="o">(</span><span class="s">"response-template"</span><span class="o">)));</span>
</code></pre></div></div>

<h3 id="json">JSON</h3>

<div class="language-json highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="p">{</span><span class="w">
    </span><span class="nl">"request"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="nl">"urlPath"</span><span class="p">:</span><span class="w"> </span><span class="s2">"/templated"</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="nl">"response"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="nl">"body"</span><span class="p">:</span><span class="w"> </span><span class="s2">"{{request.path.[0]}}"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"transformers"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="s2">"response-template"</span><span class="p">]</span><span class="w">
    </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div></div>

<p>Command line parameters can be used to enable templating when running WireMock <a href="/docs/running-standalone/#command-line-options">standalone</a>.</p>

<h2 id="template-caching">Template caching</h2>

<p>By default, all templated fragments (headers, bodies and proxy URLs) are cached in their compiled form for performance,
since compilation can be expensive for larger templates.</p>

<p>The size of the cache is not limited by default, but can be a construction time:</p>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nd">@Rule</span>
<span class="kd">public</span> <span class="nc">WireMockRule</span> <span class="n">wm</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">WireMockRule</span><span class="o">(</span><span class="n">options</span><span class="o">()</span>
    <span class="o">.</span><span class="na">extensions</span><span class="o">(</span><span class="nc">ResponseTemplateTransformer</span><span class="o">.</span><span class="na">builder</span><span class="o">()</span>
                                <span class="o">.</span><span class="na">global</span><span class="o">(</span><span class="kc">false</span><span class="o">)</span>
                                <span class="o">.</span><span class="na">maxCacheEntries</span><span class="o">(</span><span class="mi">3L</span><span class="o">)</span>
                                <span class="o">.</span><span class="na">build</span><span class="o">())</span>
<span class="o">);</span>
</code></pre></div></div>

<p>Setting the limit to 0 will disable caching completely.</p>

<h2 id="proxying">Proxying</h2>

<p>Templating also works when defining proxy URLs, e.g.</p>

<h3 id="java-1">Java</h3>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">wm</span><span class="o">.</span><span class="na">stubFor</span><span class="o">(</span><span class="n">get</span><span class="o">(</span><span class="n">urlPathEqualTo</span><span class="o">(</span><span class="s">"/templated"</span><span class="o">))</span>
  <span class="o">.</span><span class="na">willReturn</span><span class="o">(</span><span class="n">aResponse</span><span class="o">()</span>
      <span class="o">.</span><span class="na">proxiedFrom</span><span class="o">(</span><span class="s">"{{request.headers.X-WM-Proxy-Url}}"</span><span class="o">)</span>
      <span class="o">.</span><span class="na">withTransformers</span><span class="o">(</span><span class="s">"response-template"</span><span class="o">)));</span>
</code></pre></div></div>

<h3 id="json-1">JSON</h3>

<div class="language-json highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="p">{</span><span class="w">
    </span><span class="nl">"request"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="nl">"urlPath"</span><span class="p">:</span><span class="w"> </span><span class="s2">"/templated"</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="nl">"response"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="nl">"proxyBaseUrl"</span><span class="p">:</span><span class="w"> </span><span class="s2">"{{request.headers.X-WM-Proxy-Url}}"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"transformers"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="s2">"response-template"</span><span class="p">]</span><span class="w">
    </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div></div>

<h2 id="templated-body-file">Templated body file</h2>

<p>The body file for a response can be selected dynamically by templating the file path:</p>

<h3 id="java-2">Java</h3>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">wm</span><span class="o">.</span><span class="na">stubFor</span><span class="o">(</span><span class="n">get</span><span class="o">(</span><span class="n">urlPathMatching</span><span class="o">(</span><span class="s">"/static/.*"</span><span class="o">))</span>
  <span class="o">.</span><span class="na">willReturn</span><span class="o">(</span><span class="n">ok</span><span class="o">()</span>
    <span class="o">.</span><span class="na">withBodyFile</span><span class="o">(</span><span class="s">"files/{{request.pathSegments.[1]}}"</span><span class="o">)));</span>

</code></pre></div></div>

<h3 id="json-2">JSON</h3>

<div class="language-json highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="p">{</span><span class="w">
    </span><span class="nl">"request"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="nl">"urlPathPattern"</span><span class="p">:</span><span class="w"> </span><span class="s2">"/static/.*"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"method"</span><span class="p">:</span><span class="w"> </span><span class="s2">"GET"</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="nl">"response"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="nl">"status"</span><span class="p">:</span><span class="w"> </span><span class="mi">200</span><span class="p">,</span><span class="w">
        </span><span class="nl">"bodyFileName"</span><span class="p">:</span><span class="w"> </span><span class="s2">"files/{{request.pathSegments.[1]}}"</span><span class="w">
    </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div></div>

<h2 id="the-request-model">The request model</h2>

<p>The model of the request is supplied to the header and body templates. The following request attributes are available:</p>

<p><code class="language-plaintext highlighter-rouge">request.url</code> - URL path and query</p>

<p><code class="language-plaintext highlighter-rouge">request.path</code> - URL path</p>

<p><code class="language-plaintext highlighter-rouge">request.pathSegments.[&lt;n&gt;]</code>- URL path segment (zero indexed) e.g. <code class="language-plaintext highlighter-rouge">request.pathSegments.[2]</code></p>

<p><code class="language-plaintext highlighter-rouge">request.query.&lt;key&gt;</code>- First value of a query parameter e.g. <code class="language-plaintext highlighter-rouge">request.query.search</code></p>

<p><code class="language-plaintext highlighter-rouge">request.query.&lt;key&gt;.[&lt;n&gt;]</code>- nth value of a query parameter (zero indexed) e.g. <code class="language-plaintext highlighter-rouge">request.query.search.[5]</code></p>

<p><code class="language-plaintext highlighter-rouge">request.method</code>- request method e.g. <code class="language-plaintext highlighter-rouge">POST</code></p>

<p><code class="language-plaintext highlighter-rouge">request.host</code>- hostname part of the URL e.g. <code class="language-plaintext highlighter-rouge">my.example.com</code></p>

<p><code class="language-plaintext highlighter-rouge">request.port</code>- port number e.g. <code class="language-plaintext highlighter-rouge">8080</code></p>

<p><code class="language-plaintext highlighter-rouge">request.scheme</code>- protocol part of the URL e.g. <code class="language-plaintext highlighter-rouge">https</code></p>

<p><code class="language-plaintext highlighter-rouge">request.baseUrl</code>- URL up to the start of the path e.g. <code class="language-plaintext highlighter-rouge">https://my.example.com:8080</code></p>

<p><code class="language-plaintext highlighter-rouge">request.headers.&lt;key&gt;</code>- First value of a request header e.g. <code class="language-plaintext highlighter-rouge">request.headers.X-Request-Id</code></p>

<p><code class="language-plaintext highlighter-rouge">request.headers.[&lt;key&gt;]</code>- Header with awkward characters e.g. <code class="language-plaintext highlighter-rouge">request.headers.[$?blah]</code></p>

<p><code class="language-plaintext highlighter-rouge">request.headers.&lt;key&gt;.[&lt;n&gt;]</code>- nth value of a header (zero indexed) e.g. <code class="language-plaintext highlighter-rouge">request.headers.ManyThings.[1]</code></p>

<p><code class="language-plaintext highlighter-rouge">request.cookies.&lt;key&gt;</code> - First value of a request cookie e.g. <code class="language-plaintext highlighter-rouge">request.cookies.JSESSIONID</code></p>

<p><code class="language-plaintext highlighter-rouge">request.cookies.&lt;key&gt;.[&lt;n&gt;]</code> - nth value of a request cookie e.g. <code class="language-plaintext highlighter-rouge">request.cookies.JSESSIONID.[2]</code></p>

<p><code class="language-plaintext highlighter-rouge">request.body</code> - Request body text (avoid for non-text bodies)</p>

<h3 id="values-that-can-be-one-or-many">Values that can be one or many</h3>

<p>A number of HTTP elements (query parameters, form fields, headers) can be single or multiple valued. The template request model and built-in helpers attempt to make
this easy to work with by wrapping these in a “list or single” type that returns the first (and often only) value when no index is specified, but also support index access.</p>

<p>For instance, given a request URL like <code class="language-plaintext highlighter-rouge">/multi-query?things=1&amp;things=2&amp;things=3</code> I can extract the query data in the following ways:</p>

<div class="language-handlebars highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">{{</span><span class="nv">request</span><span class="p">.</span><span class="nv">query</span><span class="p">.</span><span class="nv">things</span><span class="k">}}</span> // Will return 1
<span class="k">{{</span><span class="nv">request</span><span class="p">.</span><span class="nv">query</span><span class="p">.</span><span class="nv">things</span><span class="p">.</span><span class="nv">0</span><span class="k">}}</span> // Will return 1
<span class="k">{{</span><span class="nv">request</span><span class="p">.</span><span class="nv">query</span><span class="p">.</span><span class="nv">things</span><span class="p">.</span><span class="nv">first</span><span class="k">}}</span> // Will return 1
<span class="k">{{</span><span class="nv">request</span><span class="p">.</span><span class="nv">query</span><span class="p">.</span><span class="nv">things</span><span class="p">.</span><span class="nv">1</span><span class="k">}}</span> // Will return 2
<span class="k">{{</span><span class="nv">request</span><span class="p">.</span><span class="nv">query</span><span class="p">.</span><span class="nv">things</span><span class="p">.[</span><span class="nv">-1</span><span class="p">]</span><span class="k">}}</span> // Will return 2
<span class="k">{{</span><span class="nv">request</span><span class="p">.</span><span class="nv">query</span><span class="p">.</span><span class="nv">things</span><span class="p">.</span><span class="nv">last</span><span class="k">}}</span> // Will return 3
</code></pre></div></div>

<blockquote>
  <p><strong>Note</strong></p>

  <p>When using the <code class="language-plaintext highlighter-rouge">eq</code> helper with one-or-many values, it is necessary to use the indexed form, even if only one value is present.
The reason for this is that the non-indexed form returns the wrapper type and not a String, and will therefore fail any comparison
with another String value.</p>
</blockquote>

<h3 id="getting-values-with-keys-containing-special-characters">Getting values with keys containing special characters</h3>

<p>Certain characters have special meaning in Handlebars and therefore can’t be used in key names when referencing values.
If you need to access keys containing these characters you can use the <code class="language-plaintext highlighter-rouge">lookup</code> helper, which permits you to pass the key
name as a string literal and thus avoid the restriction.</p>

<p>Probably the most common occurrence of this issue is with array-style query parameters, so for instance if your request
URLs you’re matching are of the form <code class="language-plaintext highlighter-rouge">/stuff?ids[]=111&amp;ids[]=222&amp;ids[]=333</code> then you can access these values like:</p>

<div class="language-handlebars highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">{{</span><span class="nv">lookup</span> <span class="nv">request</span><span class="p">.</span><span class="nv">query</span> <span class="s1">'ids[].1'</span><span class="k">}}</span> // Will return 222
</code></pre></div></div>

<h2 id="using-transformer-parameters">Using transformer parameters</h2>

<p>Parameter values can be passed to the transformer as shown below (or dynamically added to the parameters map programmatically in custom transformers).</p>

<h3 id="java-3">Java</h3>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">wm</span><span class="o">.</span><span class="na">stubFor</span><span class="o">(</span><span class="n">get</span><span class="o">(</span><span class="n">urlPathEqualTo</span><span class="o">(</span><span class="s">"/templated"</span><span class="o">))</span>
  <span class="o">.</span><span class="na">willReturn</span><span class="o">(</span><span class="n">aResponse</span><span class="o">()</span>
      <span class="o">.</span><span class="na">withBody</span><span class="o">(</span><span class="s">"{{request.path.[0]}}"</span><span class="o">)</span>
      <span class="o">.</span><span class="na">withTransformers</span><span class="o">(</span><span class="s">"response-template"</span><span class="o">)</span>
      <span class="o">.</span><span class="na">withTransformerParameter</span><span class="o">(</span><span class="s">"MyCustomParameter"</span><span class="o">,</span> <span class="s">"Parameter Value"</span><span class="o">)));</span>
</code></pre></div></div>

<h3 id="json-3">JSON</h3>

<div class="language-json highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="p">{</span><span class="w">
    </span><span class="nl">"request"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="nl">"urlPath"</span><span class="p">:</span><span class="w"> </span><span class="s2">"/templated"</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="nl">"response"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="nl">"body"</span><span class="p">:</span><span class="w"> </span><span class="s2">"{{request.path.[0]}}"</span><span class="p">,</span><span class="w">
        </span><span class="nl">"transformers"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="s2">"response-template"</span><span class="p">],</span><span class="w">
        </span><span class="nl">"transformerParameters"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
            </span><span class="nl">"MyCustomParameter"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Parameter Value"</span><span class="w">
        </span><span class="p">}</span><span class="w">
    </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div></div>

<p>These parameters can be referenced in template body content using the <code class="language-plaintext highlighter-rouge">parameters.</code> prefix:</p>

<div class="language-handlebars highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nt">&lt;h1&gt;</span>The MyCustomParameter value is <span class="k">{{</span><span class="nv">parameters</span><span class="p">.</span><span class="nv">MyCustomParameter</span><span class="k">}}</span><span class="nt">&lt;/h1&gt;</span>
</code></pre></div></div>

<h2 id="handlebars-helpers">Handlebars helpers</h2>

<p>All of the standard helpers (template functions) provided by the <a href="https://github.com/jknack/handlebars.java">Java Handlebars implementation by jknack</a>
plus all of the <a href="https://github.com/jknack/handlebars.java/blob/master/handlebars/src/main/java/com/github/jknack/handlebars/helper/StringHelpers.java">string helpers</a>
and the <a href="https://github.com/jknack/handlebars.java/blob/master/handlebars/src/main/java/com/github/jknack/handlebars/helper/ConditionalHelpers.java">conditional helpers</a>
are available e.g.</p>

<div class="language-handlebars highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">{{</span><span class="nv">capitalize</span> <span class="nv">request</span><span class="p">.</span><span class="nv">query</span><span class="p">.</span><span class="nv">search</span><span class="k">}}</span>
</code></pre></div></div>

<h2 id="number-and-assignment-helpers">Number and assignment helpers</h2>

<p>Variable assignment and number helpers are available:</p>

<div class="language-handlebars highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">{{#</span><span class="nn">assign</span> <span class="s1">'myCapitalisedQuery'</span><span class="k">}}{{</span><span class="nv">capitalize</span> <span class="nv">request</span><span class="p">.</span><span class="nv">query</span><span class="p">.</span><span class="nv">search</span><span class="k">}}{{/</span><span class="nn">assign</span><span class="k">}}</span>

<span class="k">{{</span><span class="nv">isOdd</span> <span class="nv">3</span><span class="k">}}</span>
<span class="k">{{</span><span class="nv">isOdd</span> <span class="nv">3</span> <span class="s1">'rightBox'</span><span class="k">}}</span>

<span class="k">{{</span><span class="nv">isEven</span> <span class="nv">2</span><span class="k">}}</span>
<span class="k">{{</span><span class="nv">isEven</span> <span class="nv">4</span> <span class="s1">'leftBox'</span><span class="k">}}</span>

<span class="k">{{</span><span class="nv">stripes</span> <span class="nv">3</span> <span class="s1">'row-even'</span> <span class="s1">'row-odd'</span><span class="k">}}</span>
</code></pre></div></div>

<h2 id="xpath-helpers">XPath helpers</h2>

<p>Addiionally some helpers are available for working with JSON and XML.</p>

<p>When the incoming request contains XML, the <code class="language-plaintext highlighter-rouge">xPath</code> helper can be used to extract values or sub documents via an XPath 1.0 expression. For instance, given the XML</p>

<div class="language-xml highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nt">&lt;outer&gt;</span>
    <span class="nt">&lt;inner&gt;</span>Stuff<span class="nt">&lt;/inner&gt;</span>
<span class="nt">&lt;/outer&gt;</span>
</code></pre></div></div>

<p>The following will render “Stuff” into the output:</p>

<div class="language-handlebars highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">{{</span><span class="nv">xPath</span> <span class="nv">request</span><span class="p">.</span><span class="nv">body</span> <span class="s1">'/outer/inner/text()'</span><span class="k">}}</span>
</code></pre></div></div>

<p>And given the same XML the following will render <code class="language-plaintext highlighter-rouge">&lt;inner&gt;Stuff&lt;/inner&gt;</code>:</p>

<div class="language-handlebars highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">{{</span><span class="nv">xPath</span> <span class="nv">request</span><span class="p">.</span><span class="nv">body</span> <span class="s1">'/outer/inner'</span><span class="k">}}</span>
</code></pre></div></div>

<p>As a convenience the <code class="language-plaintext highlighter-rouge">soapXPath</code> helper also exists for extracting values from SOAP bodies e.g. for the SOAP document:</p>

<div class="language-xml highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nt">&lt;soap:Envelope</span> <span class="na">xmlns:soap=</span><span class="s">"http://www.w3.org/2003/05/soap-envelope/"</span><span class="nt">&gt;</span>
    <span class="nt">&lt;soap:Body&gt;</span>
        <span class="nt">&lt;m:a&gt;</span>
            <span class="nt">&lt;m:test&gt;</span>success<span class="nt">&lt;/m:test&gt;</span>
        <span class="nt">&lt;/m:a&gt;</span>
    <span class="nt">&lt;/soap:Body&gt;</span>
<span class="nt">&lt;/soap:Envelope&gt;</span>
</code></pre></div></div>

<p>The following will render “success” in the output:</p>

<div class="language-handlebars highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">{{</span><span class="nv">soapXPath</span> <span class="nv">request</span><span class="p">.</span><span class="nv">body</span> <span class="s1">'/a/test/text()'</span><span class="k">}}</span>
</code></pre></div></div>

<h3 id="using-the-output-of-xpath-in-other-helpers">Using the output of <code class="language-plaintext highlighter-rouge">xPath</code> in other helpers</h3>

<p>Since version 2.27.0 the XPath helper returns collections of node objects rather than a single string, meaning that the result
can be used in further helpers.</p>

<p>The returned node objects have the following properties:</p>

<p><code class="language-plaintext highlighter-rouge">name</code> - the local XML element name.</p>

<p><code class="language-plaintext highlighter-rouge">text</code> - the text content of the element.</p>

<p><code class="language-plaintext highlighter-rouge">attributes</code> - a map of the element’s attributes (name: value)</p>

<p>Referring to the node itself will cause it to be printed.</p>

<p>A common use case for returned node objects is to iterate over the collection with the <code class="language-plaintext highlighter-rouge">each</code> helper:</p>

<div class="language-handlebars highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">{{#</span><span class="nn">each</span> <span class="p">(</span><span class="nv">xPath</span> <span class="nv">request</span><span class="p">.</span><span class="nv">body</span> <span class="s1">'/things/item'</span><span class="p">)</span> <span class="nv">as</span> <span class="p">|</span><span class="nv">node</span><span class="p">|</span><span class="k">}}</span>
  name: <span class="k">{{</span><span class="nv">node</span><span class="p">.</span><span class="nv">name</span><span class="k">}}</span>, text: <span class="k">{{</span><span class="nv">node</span><span class="p">.</span><span class="nv">text</span><span class="k">}}</span>, ID attribute: <span class="k">{{</span><span class="nv">node</span><span class="p">.</span><span class="nv">attributes</span><span class="p">.</span><span class="nv">id</span><span class="k">}}</span>
<span class="k">{{/</span><span class="nn">each</span><span class="k">}}</span>
</code></pre></div></div>

<h2 id="jsonpath-helper">JSONPath helper</h2>

<p>It is similarly possible to extract JSON values or sub documents via JSONPath using the <code class="language-plaintext highlighter-rouge">jsonPath</code> helper. Given the JSON</p>

<div class="language-json highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="p">{</span><span class="w">
    </span><span class="nl">"outer"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="nl">"inner"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Stuff"</span><span class="w">
    </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div></div>

<p>The following will render “Stuff” into the output:</p>

<div class="language-handlebars highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">{{</span><span class="nv">jsonPath</span> <span class="nv">request</span><span class="p">.</span><span class="nv">body</span> <span class="s1">'$.outer.inner'</span><span class="k">}}</span>
</code></pre></div></div>

<p>And for the same JSON the following will render <code class="language-plaintext highlighter-rouge">{ "inner": "Stuff" }</code>:</p>

<div class="language-handlebars highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">{{</span><span class="nv">jsonPath</span> <span class="nv">request</span><span class="p">.</span><span class="nv">body</span> <span class="s1">'$.outer'</span><span class="k">}}</span>
</code></pre></div></div>

<p>Default value can be specified if the path evaluates to null or undefined:</p>

<div class="language-handlebars highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">{{</span><span class="nv">jsonPath</span> <span class="nv">request</span><span class="p">.</span><span class="nv">body</span> <span class="s1">'$.size'</span> <span class="nv">default</span><span class="o">=</span><span class="s1">'M'</span><span class="k">}}</span>
</code></pre></div></div>

<h2 id="parse-json-helper">Parse JSON helper</h2>

<p>The <code class="language-plaintext highlighter-rouge">parseJson</code> helper will parse the input into a map-of-maps. It will assign the result to a variable if a name is specified,
otherwise the result will be returned.</p>

<p>It can accept the JSON from a block:</p>

<div class="language-handlebars highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">{{#</span><span class="nn">parseJson</span> <span class="s1">'parsedObj'</span><span class="k">}}</span>
{
  "name": "transformed"
}
<span class="k">{{/</span><span class="nn">parseJson</span><span class="k">}}</span>

<span class="c">{{!- Now we can access the object as usual --}}</span>
<span class="k">{{</span><span class="nv">parsedObj</span><span class="p">.</span><span class="nv">name</span><span class="k">}}</span>
</code></pre></div></div>

<p>Or as a parameter:</p>

<div class="language-handlebars highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">{{</span><span class="nv">parseJson</span> <span class="nv">request</span><span class="p">.</span><span class="nv">body</span> <span class="s1">'bodyJson'</span><span class="k">}}</span>
<span class="k">{{</span><span class="nv">bodyJson</span><span class="p">.</span><span class="nv">name</span><span class="k">}}</span>
</code></pre></div></div>

<p>Without assigning to a variable:</p>

<div class="language-handlebars highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">{{</span><span class="nv">lookup</span> <span class="p">(</span><span class="nv">parseJson</span> <span class="nv">request</span><span class="p">.</span><span class="nv">body</span><span class="p">)</span> <span class="s1">'name'</span><span class="k">}}</span>
</code></pre></div></div>

<h2 id="date-and-time-helpers">Date and time helpers</h2>

<p>A helper is present to render the current date/time, with the ability to specify the format (<a href="https://docs.oracle.com/javase/7/docs/api/java/text/SimpleDateFormat.html">via Java’s SimpleDateFormat</a>) and offset.</p>

<div class="language-handlebars highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">{{</span><span class="nv">now</span><span class="k">}}</span>
<span class="k">{{</span><span class="nv">now</span> <span class="nv">offset</span><span class="o">=</span><span class="s1">'3 days'</span><span class="k">}}</span>
<span class="k">{{</span><span class="nv">now</span> <span class="nv">offset</span><span class="o">=</span><span class="s1">'-24 seconds'</span><span class="k">}}</span>
<span class="k">{{</span><span class="nv">now</span> <span class="nv">offset</span><span class="o">=</span><span class="s1">'1 years'</span><span class="k">}}</span>
<span class="k">{{</span><span class="nv">now</span> <span class="nv">offset</span><span class="o">=</span><span class="s1">'10 years'</span> <span class="nv">format</span><span class="o">=</span><span class="s1">'yyyy-MM-dd'</span><span class="k">}}</span>
</code></pre></div></div>

<p>Dates can be rendered in a specific timezone (the default is UTC):</p>

<div class="language-handlebars highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">{{</span><span class="nv">now</span> <span class="nv">timezone</span><span class="o">=</span><span class="s1">'Australia/Sydney'</span> <span class="nv">format</span><span class="o">=</span><span class="s1">'yyyy-MM-dd HH:mm:ssZ'</span><span class="k">}}</span>
</code></pre></div></div>

<p>Pass <code class="language-plaintext highlighter-rouge">epoch</code> as the format to render the date as UNIX epoch time (in milliseconds), or <code class="language-plaintext highlighter-rouge">unix</code> as the format to render
the UNIX timestamp in seconds.</p>

<div class="language-handlebars highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">{{</span><span class="nv">now</span> <span class="nv">offset</span><span class="o">=</span><span class="s1">'2 years'</span> <span class="nv">format</span><span class="o">=</span><span class="s1">'epoch'</span><span class="k">}}</span>
<span class="k">{{</span><span class="nv">now</span> <span class="nv">offset</span><span class="o">=</span><span class="s1">'2 years'</span> <span class="nv">format</span><span class="o">=</span><span class="s1">'unix'</span><span class="k">}}</span>
</code></pre></div></div>

<p>Dates can be parsed using the <code class="language-plaintext highlighter-rouge">parseDate</code> helper:</p>

<div class="language-handlebars highlighter-rouge"><div class="highlight"><pre class="highlight"><code>// Attempts parsing using ISO8601, RFC 1123, RFC 1036 and ASCTIME formats.
// We wrap in the date helper in order to print the result as a string.
<span class="k">{{</span><span class="nv">date</span> <span class="p">(</span><span class="nv">parseDate</span> <span class="nv">request</span><span class="p">.</span><span class="nv">headers</span><span class="p">.</span><span class="nv">MyDate</span><span class="p">)</span><span class="k">}}</span>

// Parse using a custom date format
<span class="k">{{</span><span class="nv">date</span> <span class="p">(</span><span class="nv">parseDate</span> <span class="nv">request</span><span class="p">.</span><span class="nv">headers</span><span class="p">.</span><span class="nv">MyDate</span> <span class="nv">format</span><span class="o">=</span><span class="s1">'dd/MM/yyyy'</span><span class="p">)</span><span class="k">}}</span>

// Format can also be unix (epoch seconds) or epoch (epoch milliseconds)
<span class="k">{{</span><span class="nv">date</span> <span class="p">(</span><span class="nv">parseDate</span> <span class="nv">request</span><span class="p">.</span><span class="nv">headers</span><span class="p">.</span><span class="nv">MyDate</span> <span class="nv">format</span><span class="o">=</span><span class="s1">'unix'</span><span class="p">)</span><span class="k">}}</span>
</code></pre></div></div>

<p>Dates can be truncated to e.g. first day of month using the <code class="language-plaintext highlighter-rouge">truncateDate</code> helper:</p>

<div class="language-handlebars highlighter-rouge"><div class="highlight"><pre class="highlight"><code>// If the MyDate header is Tue, 15 Jun 2021 15:16:17 GMT
// then the result of the following will be 2021-06-01T00:00:00Z
<span class="k">{{</span><span class="nv">date</span> <span class="p">(</span><span class="nv">truncateDate</span> <span class="p">(</span><span class="nv">parseDate</span> <span class="nv">request</span><span class="p">.</span><span class="nv">headers</span><span class="p">.</span><span class="nv">MyDate</span><span class="p">)</span> <span class="s1">'first day of month'</span><span class="p">)</span><span class="k">}}</span>
</code></pre></div></div>

<p>See the <a href="/docs/request-matching/#all-truncations">full list of truncations here</a>.</p>

<h2 id="random-value-helper">Random value helper</h2>

<p>Random strings of various kinds can be generated:</p>

<div class="language-handlebars highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">{{</span><span class="nv">randomValue</span> <span class="nv">length</span><span class="o">=</span><span class="nv">33</span> <span class="nv">type</span><span class="o">=</span><span class="s1">'ALPHANUMERIC'</span><span class="k">}}</span>
<span class="k">{{</span><span class="nv">randomValue</span> <span class="nv">length</span><span class="o">=</span><span class="nv">12</span> <span class="nv">type</span><span class="o">=</span><span class="s1">'ALPHANUMERIC'</span> <span class="nv">uppercase</span><span class="o">=</span><span class="kc">true</span><span class="k">}}</span>
<span class="k">{{</span><span class="nv">randomValue</span> <span class="nv">length</span><span class="o">=</span><span class="nv">55</span> <span class="nv">type</span><span class="o">=</span><span class="s1">'ALPHABETIC'</span><span class="k">}}</span>
<span class="k">{{</span><span class="nv">randomValue</span> <span class="nv">length</span><span class="o">=</span><span class="nv">27</span> <span class="nv">type</span><span class="o">=</span><span class="s1">'ALPHABETIC'</span> <span class="nv">uppercase</span><span class="o">=</span><span class="kc">true</span><span class="k">}}</span>
<span class="k">{{</span><span class="nv">randomValue</span> <span class="nv">length</span><span class="o">=</span><span class="nv">10</span> <span class="nv">type</span><span class="o">=</span><span class="s1">'NUMERIC'</span><span class="k">}}</span>
<span class="k">{{</span><span class="nv">randomValue</span> <span class="nv">length</span><span class="o">=</span><span class="nv">5</span> <span class="nv">type</span><span class="o">=</span><span class="s1">'ALPHANUMERIC_AND_SYMBOLS'</span><span class="k">}}</span>
<span class="k">{{</span><span class="nv">randomValue</span> <span class="nv">type</span><span class="o">=</span><span class="s1">'UUID'</span><span class="k">}}</span>
<span class="k">{{</span><span class="nv">randomValue</span> <span class="nv">length</span><span class="o">=</span><span class="nv">32</span> <span class="nv">type</span><span class="o">=</span><span class="s1">'HEXADECIMAL'</span> <span class="nv">uppercase</span><span class="o">=</span><span class="kc">true</span><span class="k">}}</span>
</code></pre></div></div>

<h2 id="pick-random-helper">Pick random helper</h2>

<p>A value can be randomly selected from a literal list:</p>

<div class="language-handlebars highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">{{{</span><span class="nv">pickRandom</span> <span class="s1">'1'</span> <span class="s1">'2'</span> <span class="s1">'3'</span><span class="k">}}}</span>
</code></pre></div></div>

<p>Or from a list passed as a parameter:</p>

<div class="language-handlebars highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">{{{</span><span class="nv">pickRandom</span> <span class="p">(</span><span class="nv">jsonPath</span> <span class="nv">request</span><span class="p">.</span><span class="nv">body</span> <span class="s1">'$.names'</span><span class="p">)</span><span class="k">}}}</span>
</code></pre></div></div>

<h2 id="random-number-helpers">Random number helpers</h2>

<p>These helpers produce random numbers of the desired type. By returning actual typed numbers rather than strings
we can use them for further work e.g. by doing arithemetic with the <code class="language-plaintext highlighter-rouge">math</code> helper or randomising the bound in a <code class="language-plaintext highlighter-rouge">range</code>.</p>

<p>Random integers can be produced with lower and/or upper bounds, or neither:</p>

<div class="language-handlebars highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">{{</span><span class="nv">randomInt</span><span class="k">}}</span>
<span class="k">{{</span><span class="nv">randomInt</span> <span class="nv">lower</span><span class="o">=</span><span class="nv">5</span> <span class="nv">upper</span><span class="o">=</span><span class="nv">9</span><span class="k">}}</span>
<span class="k">{{</span><span class="nv">randomInt</span> <span class="nv">upper</span><span class="o">=</span><span class="nv">54323</span><span class="k">}}</span>
<span class="k">{{</span><span class="nv">randomInt</span> <span class="nv">lower</span><span class="o">=</span><span class="nv">-24</span><span class="k">}}</span>
</code></pre></div></div>

<p>Likewise decimals can be produced with or without bounds:</p>

<div class="language-handlebars highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">{{</span><span class="nv">randomDecimal</span><span class="k">}}</span>
<span class="k">{{</span><span class="nv">randomDecimal</span> <span class="nv">lower</span><span class="o">=</span><span class="nv">-10</span><span class="p">.</span><span class="nv">1</span> <span class="nv">upper</span><span class="o">=</span><span class="nv">-0</span><span class="p">.</span><span class="nv">9</span><span class="k">}}</span>
<span class="k">{{</span><span class="nv">randomDecimal</span> <span class="nv">upper</span><span class="o">=</span><span class="nv">12</span><span class="p">.</span><span class="nv">5</span><span class="k">}}</span>
<span class="k">{{</span><span class="nv">randomDecimal</span> <span class="nv">lower</span><span class="o">=</span><span class="nv">-24</span><span class="p">.</span><span class="nv">01</span><span class="k">}}</span>
</code></pre></div></div>

<h2 id="math-helper">Math helper</h2>

<p>The <code class="language-plaintext highlighter-rouge">math</code> (or maths, depending where you are) helper performs common arithmetic operations. It can accept integers, decimals
or strings as its operands and will always yield a number as its output rather than a string.</p>

<p>Addition, subtraction, multiplication, division and remainder (mod) are supported:</p>

<div class="language-handlebars highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">{{</span><span class="nv">math</span> <span class="nv">1</span> <span class="s1">'+'</span> <span class="nv">2</span><span class="k">}}</span>
<span class="k">{{</span><span class="nv">math</span> <span class="nv">4</span> <span class="s1">'-'</span> <span class="nv">2</span><span class="k">}}</span>
<span class="k">{{</span><span class="nv">math</span> <span class="nv">2</span> <span class="s1">'*'</span> <span class="nv">3</span><span class="k">}}</span>
<span class="k">{{</span><span class="nv">math</span> <span class="nv">8</span> <span class="s1">'/'</span> <span class="nv">2</span><span class="k">}}</span>
<span class="k">{{</span><span class="nv">math</span> <span class="nv">10</span> <span class="s1">'%'</span> <span class="nv">3</span><span class="k">}}</span>
</code></pre></div></div>

<h2 id="range-helper">Range helper</h2>

<p>The <code class="language-plaintext highlighter-rouge">range</code> helper will produce an array of integers between the bounds specified:</p>

<div class="language-handlebars highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">{{</span><span class="nv">range</span> <span class="nv">3</span> <span class="nv">8</span><span class="k">}}</span>
<span class="k">{{</span><span class="nv">range</span> <span class="nv">-2</span> <span class="nv">2</span><span class="k">}}</span>
</code></pre></div></div>

<p>This can be usefully combined with <code class="language-plaintext highlighter-rouge">randomInt</code> and <code class="language-plaintext highlighter-rouge">each</code> to output random length, repeating pieces of content e.g.</p>

<div class="language-handlebars highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">{{#</span><span class="nn">each</span> <span class="p">(</span><span class="nv">range</span> <span class="nv">0</span> <span class="p">(</span><span class="nv">randomInt</span> <span class="nv">lower</span><span class="o">=</span><span class="nv">1</span> <span class="nv">upper</span><span class="o">=</span><span class="nv">10</span><span class="p">))</span> <span class="nv">as</span> <span class="p">|</span><span class="nv">index</span><span class="p">|</span><span class="k">}}</span>
id: <span class="k">{{</span><span class="nv">index</span><span class="k">}}</span>
<span class="k">{{/</span><span class="nn">each</span><span class="k">}}</span>
</code></pre></div></div>

<h2 id="array-literal-helper">Array literal helper</h2>

<p>The <code class="language-plaintext highlighter-rouge">array</code> helper will produce an array from the list of parameters specified. The values can be any valid type.
Providing no parameters will result in an empty array.</p>

<div class="language-handlebars highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">{{</span><span class="nv">array</span> <span class="nv">1</span> <span class="s1">'two'</span> <span class="kc">true</span><span class="k">}}</span>
<span class="k">{{</span><span class="nv">array</span><span class="k">}}</span>
</code></pre></div></div>

<h2 id="contains-helper">Contains helper</h2>

<p>The <code class="language-plaintext highlighter-rouge">contains</code> helper returns a boolean value indicating whether the string or array passed as the first parameter
contains the string passed in the second.</p>

<p>It can be used as parameter to the <code class="language-plaintext highlighter-rouge">if</code> helper:</p>

<div class="language-handlebars highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">{{#if</span> <span class="p">(</span><span class="nv">contains</span> <span class="s1">'abcde'</span> <span class="s1">'abc'</span><span class="p">)</span><span class="k">}}</span>YES<span class="k">{{/if}}</span>
<span class="k">{{#if</span> <span class="p">(</span><span class="nv">contains</span> <span class="p">(</span><span class="nv">array</span> <span class="s1">'a'</span> <span class="s1">'b'</span> <span class="s1">'c'</span><span class="p">)</span> <span class="s1">'a'</span><span class="p">)</span><span class="k">}}</span>YES<span class="k">{{/if}}</span>
</code></pre></div></div>

<p>Or as a block element on its own:</p>

<div class="language-handlebars highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">{{#</span><span class="nn">contains</span> <span class="s1">'abcde'</span> <span class="s1">'abc'</span><span class="k">}}</span>YES<span class="k">{{/</span><span class="nn">contains</span><span class="k">}}</span>
<span class="k">{{#</span><span class="nn">contains</span> <span class="p">(</span><span class="nv">array</span> <span class="s1">'a'</span> <span class="s1">'b'</span> <span class="s1">'c'</span><span class="p">)</span> <span class="s1">'a'</span><span class="k">}}</span>YES<span class="k">{{/</span><span class="nn">contains</span><span class="k">}}</span>
</code></pre></div></div>

<h2 id="matches-helper">Matches helper</h2>

<p>The <code class="language-plaintext highlighter-rouge">matches</code> helper returns a boolean value indicating whether the string passed as the first parameter matches the
regular expression passed in the second:</p>

<p>Like the <code class="language-plaintext highlighter-rouge">contains</code> helper it can be used as parameter to the <code class="language-plaintext highlighter-rouge">if</code> helper:</p>

<div class="language-handlebars highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">{{#if</span> <span class="p">(</span><span class="nv">matches</span> <span class="s1">'123'</span> <span class="s1">'[0-9]+'</span><span class="p">)</span><span class="k">}}</span>YES<span class="k">{{/if}}</span>
</code></pre></div></div>

<p>Or as a block element on its own:</p>

<div class="language-handlebars highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">{{#</span><span class="nn">matches</span> <span class="s1">'123'</span> <span class="s1">'[0-9]+'</span><span class="k">}}</span>YES<span class="k">{{/</span><span class="nn">matches</span><span class="k">}}</span>
</code></pre></div></div>

<h2 id="string-trim-helper">String trim helper</h2>

<p>Use the <code class="language-plaintext highlighter-rouge">trim</code> helper to remove whitespace from the start and end of the input:</p>

<div class="language-handlebars highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">{{</span><span class="nv">trim</span> <span class="nv">request</span><span class="p">.</span><span class="nv">headers</span><span class="p">.</span><span class="nv">X-Padded-Header</span><span class="k">}}</span>

<span class="k">{{#</span><span class="nn">trim</span><span class="k">}}</span>

    Some stuff with whitespace

<span class="k">{{/</span><span class="nn">trim</span><span class="k">}}</span>
</code></pre></div></div>

<h2 id="base64-helper">Base64 helper</h2>

<p>The <code class="language-plaintext highlighter-rouge">base64</code> helper can be used to base64 encode and decode values:</p>

<div class="language-handlebars highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">{{</span><span class="nv">base64</span> <span class="nv">request</span><span class="p">.</span><span class="nv">headers</span><span class="p">.</span><span class="nv">X-Plain-Header</span><span class="k">}}</span>
<span class="k">{{</span><span class="nv">base64</span> <span class="nv">request</span><span class="p">.</span><span class="nv">headers</span><span class="p">.</span><span class="nv">X-Encoded-Header</span> <span class="nv">decode</span><span class="o">=</span><span class="kc">true</span><span class="k">}}</span>

<span class="k">{{#</span><span class="nn">base64</span><span class="k">}}</span>
Content to encode
<span class="k">{{/</span><span class="nn">base64</span><span class="k">}}</span>

<span class="k">{{#</span><span class="nn">base64</span> <span class="nv">padding</span><span class="o">=</span><span class="kc">false</span><span class="k">}}</span>
Content to encode without padding
<span class="k">{{/</span><span class="nn">base64</span><span class="k">}}</span>

<span class="k">{{#</span><span class="nn">base64</span> <span class="nv">decode</span><span class="o">=</span><span class="kc">true</span><span class="k">}}</span>
Q29udGVudCB0byBkZWNvZGUK
<span class="k">{{/</span><span class="nn">base64</span><span class="k">}}</span>
</code></pre></div></div>

<h2 id="url-encoding-helper">URL encoding helper</h2>

<p>The <code class="language-plaintext highlighter-rouge">urlEncode</code> helper can be used to URL encode and decode values:</p>

<div class="language-handlebars highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">{{</span><span class="nv">urlEncode</span> <span class="nv">request</span><span class="p">.</span><span class="nv">headers</span><span class="p">.</span><span class="nv">X-Plain-Header</span><span class="k">}}</span>
<span class="k">{{</span><span class="nv">urlEncode</span> <span class="nv">request</span><span class="p">.</span><span class="nv">headers</span><span class="p">.</span><span class="nv">X-Encoded-Header</span> <span class="nv">decode</span><span class="o">=</span><span class="kc">true</span><span class="k">}}</span>

<span class="k">{{#</span><span class="nn">urlEncode</span><span class="k">}}</span>
Content to encode
<span class="k">{{/</span><span class="nn">urlEncode</span><span class="k">}}</span>

<span class="k">{{#</span><span class="nn">urlEncode</span> <span class="nv">decode</span><span class="o">=</span><span class="kc">true</span><span class="k">}}</span>
Content%20to%20decode
<span class="k">{{/</span><span class="nn">urlEncode</span><span class="k">}}</span>
</code></pre></div></div>

<h2 id="form-helper">Form helper</h2>

<p>The <code class="language-plaintext highlighter-rouge">formData</code> helper parses its input as an HTTP form, returning an object containing the individual fields as attributes.
The helper takes the input string and variable name as its required parameters, with an optional <code class="language-plaintext highlighter-rouge">urlDecode</code> parameter
indicating that values should be URL decoded. The folowing example will parse the request body as a form, then output a single field <code class="language-plaintext highlighter-rouge">formField3</code>:</p>

<div class="language-handlebars highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">{{</span><span class="nv">formData</span> <span class="nv">request</span><span class="p">.</span><span class="nv">body</span> <span class="s1">'form'</span> <span class="nv">urlDecode</span><span class="o">=</span><span class="kc">true</span><span class="k">}}{{</span><span class="nv">form</span><span class="p">.</span><span class="nv">formField3</span><span class="k">}}</span>
</code></pre></div></div>

<p>If the form submitted has multiple values for a given field, these can be accessed by index:</p>

<div class="language-handlebars highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">{{</span><span class="nv">formData</span> <span class="nv">request</span><span class="p">.</span><span class="nv">body</span> <span class="s1">'form'</span> <span class="nv">urlDecode</span><span class="o">=</span><span class="kc">true</span><span class="k">}}{{</span><span class="nv">form</span><span class="p">.</span><span class="nv">multiValueField</span><span class="p">.</span><span class="nv">1</span><span class="k">}}</span>, <span class="k">{{</span><span class="nv">form</span><span class="p">.</span><span class="nv">multiValueField</span><span class="p">.</span><span class="nv">2</span><span class="k">}}</span>
<span class="k">{{</span><span class="nv">formData</span> <span class="nv">request</span><span class="p">.</span><span class="nv">body</span> <span class="s1">'form'</span> <span class="nv">urlDecode</span><span class="o">=</span><span class="kc">true</span><span class="k">}}{{</span><span class="nv">form</span><span class="p">.</span><span class="nv">multiValueField</span><span class="p">.</span><span class="nv">first</span><span class="k">}}</span>, <span class="k">{{</span><span class="nv">form</span><span class="p">.</span><span class="nv">multiValueField</span><span class="p">.</span><span class="nv">last</span><span class="k">}}</span>
</code></pre></div></div>

<h2 id="regular-expression-extract-helper">Regular expression extract helper</h2>

<p>The <code class="language-plaintext highlighter-rouge">regexExtract</code> helper supports extraction of values matching a regular expresson from a string.</p>

<p>A single value can be extracted like this:</p>

<div class="language-handlebars highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">{{</span><span class="nv">regexExtract</span> <span class="nv">request</span><span class="p">.</span><span class="nv">body</span> <span class="s1">'[A-Z]+'</span><span class="k">}}</span>"
</code></pre></div></div>

<p>Regex groups can be used to extract multiple parts into an object for later use (the last parameter is a variable name to which the object will be assigned):</p>

<div class="language-handlebars highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">{{</span><span class="nv">regexExtract</span> <span class="nv">request</span><span class="p">.</span><span class="nv">body</span> <span class="s1">'([a-z]+)-([A-Z]+)-([0-9]+)'</span> <span class="s1">'parts'</span><span class="k">}}</span>
<span class="k">{{</span><span class="nv">parts</span><span class="p">.</span><span class="nv">0</span><span class="k">}}</span>,<span class="k">{{</span><span class="nv">parts</span><span class="p">.</span><span class="nv">1</span><span class="k">}}</span>,<span class="k">{{</span><span class="nv">parts</span><span class="p">.</span><span class="nv">2</span><span class="k">}}</span>
</code></pre></div></div>

<p>Optionally, a default value can be specified for when there is no match. When the regex does not match and no default is specified, an error will be thrown instead.</p>

<div class="language-handlebars highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">{{</span><span class="nv">regexExtract</span> <span class="s1">'abc'</span> <span class="s1">'[0-9]+'</span> <span class="nv">default</span><span class="o">=</span><span class="s1">'my default value'</span><span class="k">}}</span>
</code></pre></div></div>

<h2 id="size-helper">Size helper</h2>

<p>The <code class="language-plaintext highlighter-rouge">size</code> helper returns the size of a string, list or map:</p>

<div class="language-handlebars highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">{{</span><span class="nv">size</span> <span class="s1">'abcde'</span><span class="k">}}</span>
<span class="k">{{</span><span class="nv">size</span> <span class="nv">request</span><span class="p">.</span><span class="nv">query</span><span class="p">.</span><span class="nv">things</span><span class="k">}}</span>
</code></pre></div></div>

<h2 id="hostname-helper">Hostname helper</h2>

<p>The local machine’s hostname can be printed:</p>

<div class="language-handlebars highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">{{</span><span class="nv">hostname</span><span class="k">}}</span>
</code></pre></div></div>

<h2 id="system-property-helper">System property helper</h2>

<p>Environment variables and system properties can be printed:</p>

<div class="language-handlebars highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="k">{{</span><span class="nv">systemValue</span> <span class="nv">type</span><span class="o">=</span><span class="s1">'ENVIRONMENT'</span> <span class="nv">key</span><span class="o">=</span><span class="s1">'PATH'</span><span class="k">}}</span>
<span class="k">{{</span><span class="nv">systemValue</span> <span class="nv">type</span><span class="o">=</span><span class="s1">'PROPERTY'</span> <span class="nv">key</span><span class="o">=</span><span class="s1">'os.path'</span><span class="k">}}</span>
</code></pre></div></div>

<p>To avoid disclosure of sensitive variables, only permitted variables can be read. Permitted variable names
are defined via a set of regular expressions. These can be configured when constructing the response template extension:</p>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nd">@Rule</span>
<span class="kd">public</span> <span class="nc">WireMockRule</span> <span class="n">wm</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">WireMockRule</span><span class="o">(</span><span class="n">options</span><span class="o">()</span>
        <span class="o">.</span><span class="na">dynamicPort</span><span class="o">()</span>
        <span class="o">.</span><span class="na">withRootDirectory</span><span class="o">(</span><span class="n">defaultTestFilesRoot</span><span class="o">())</span>
        <span class="o">.</span><span class="na">extensions</span><span class="o">(</span><span class="k">new</span> <span class="nc">ResponseTemplateTransformer</span><span class="o">.</span><span class="na">Builder</span><span class="o">()</span>
                <span class="o">.</span><span class="na">global</span><span class="o">(</span><span class="kc">true</span><span class="o">)</span>
                <span class="o">.</span><span class="na">permittedSystemKeys</span><span class="o">(</span><span class="s">"allowed.*"</span><span class="o">,</span><span class="s">"also_permitted.*"</span><span class="o">)</span>
                <span class="o">.</span><span class="na">build</span><span class="o">()</span>
        <span class="o">)</span>
<span class="o">);</span>
</code></pre></div></div>

<p>The regular expressions are matched in a case-insensitive manner.</p>

<p>If no permitted system key patterns are set, a single default of <code class="language-plaintext highlighter-rouge">wiremock.*</code> will be used.</p>

<h2 id="custom-helpers">Custom helpers</h2>

<p>Custom Handlebars helpers can be registered with the transformer on construction:</p>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nc">Helper</span><span class="o">&lt;</span><span class="nc">String</span><span class="o">&gt;</span> <span class="n">stringLengthHelper</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">Helper</span><span class="o">&lt;</span><span class="nc">String</span><span class="o">&gt;()</span> <span class="o">{</span>
    <span class="nd">@Override</span>
    <span class="kd">public</span> <span class="nc">Object</span> <span class="nf">apply</span><span class="o">(</span><span class="nc">String</span> <span class="n">context</span><span class="o">,</span> <span class="nc">Options</span> <span class="n">options</span><span class="o">)</span> <span class="kd">throws</span> <span class="nc">IOException</span> <span class="o">{</span>
        <span class="k">return</span> <span class="n">context</span><span class="o">.</span><span class="na">length</span><span class="o">();</span>
    <span class="o">}</span>
<span class="o">};</span>

<span class="nd">@Rule</span>
<span class="kd">public</span> <span class="nc">WireMockRule</span> <span class="n">wm</span> <span class="o">=</span> <span class="k">new</span> <span class="nc">WireMockRule</span><span class="o">(</span>
    <span class="n">options</span><span class="o">().</span><span class="na">extensions</span><span class="o">(</span><span class="k">new</span> <span class="nc">ResponseTemplateTransformer</span><span class="o">(</span><span class="kc">false</span><span class="o">,</span> <span class="s">"string-length"</span><span class="o">,</span> <span class="n">stringLengthHelper</span><span class="o">))</span>
<span class="o">);</span>
</code></pre></div></div>

<p>This custom <code class="language-plaintext highlighter-rouge">string-length</code> helper will return the string length of the supplied parameter and is used like this:</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>{{string-length 'abcde'}}
{{string-length request.body}}
</code></pre></div></div>


        
      </section>

      <footer class="page__meta">
        
        




      </footer>

      
    </div>

    
  </article>

  
  
</div>


    <div class="page__footer">
      <footer>
        <!-- start custom footer snippets -->

<!-- end custom footer snippets -->
        

<div class="page__footer-copyright">
  <img src="https://wiremock.org/images/shortLogo.png" class="short-logo"/>

  <span class="footer-copyright-description">&copy; 2023</span>

  <ul class="footer-social-links">
      <li>
    <a href="http://github.com/wiremock" target="_blank">
      <img src="https://wiremock.org/images/githubIcon.svg" />
    </a>
  </li>

  </ul>
</div>

<script src="https://wiremock.org/assets/js/mobile-navbar.js"></script>
<script src="https://wiremock.org/assets/js/codeTab.js"></script>

<script src="https://wiremock.org/assets/js/sidebar-docs.js"></script>
<script src="https://wiremock.org/assets/js/tracking-events.js"></script>
<script src="https://wiremock.org/assets/js/faq.js"></script>

      </footer>
    </div>

    <script src="https://code.jquery.com/jquery-2.2.4.min.js" integrity="sha256-BbhdlvQf/xTY9gja0Dq3HiwQF8LaCRTXxZKRutelT44=" crossorigin="anonymous"></script>
    <script src="https://code.jquery.com/ui/1.11.4/jquery-ui.min.js" integrity="sha256-xNjb53/rY+WmG+4L6tTl9m6PpqknWZvRt0rO1SRnJzw=" crossorigin="anonymous"></script>
    <!-- <script src="https://wiremock.org/assets/js/main.min.js"></script> -->




  </body>
</html>

