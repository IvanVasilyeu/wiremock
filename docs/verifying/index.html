

<!doctype html>
<html lang="en" class="no-js">
  <head>
    

<meta charset="utf-8">



<!-- begin SEO -->



<!--  -->







<title>Verifying whether specific HTTP requests were made | WireMock</title>







<meta name="description" content="Verifying and querying requests relies on the request journal, which is an in-memory log of received requests. This can be disabled for load testing.">

<meta property="og:locale" content="en-US">
<meta property="og:site_name" content="WireMock">
<meta property="og:title" content="Verifying">

<meta name="twitter:card" content="summary" />
<meta name="twitter:site" content="WireMock" />
<meta name="twitter:description" content="Verifying and querying requests relies on the request journal, which is an in-memory log of received requests. This can be disabled for load testing.">


  <link rel="canonical" href="https://wiremock.org/docs/verifying/">
  <meta property="og:url" content="https://wiremock.org/docs/verifying/">



  <meta property="og:description" content="Verifying and querying requests relies on the request journal, which is an in-memory log of received requests. This can be disabled for load testing.">





  

  





  <meta property="og:type" content="article">
  <meta property="article:published_time" content="2023-01-26T17:19:45+00:00">
  
    <link rel="next" href="https://wiremock.org/docs/webhooks-and-callbacks/" title="Webhooks and Callbacks">
  
  
    <link rel="prev" href="https://wiremock.org/docs/stubbing/" title="Stubbing">
  





  <script type="application/ld+json">
    {
      "@context" : "http://schema.org",
      "@type" : "Person",
      "name" : "Tom Akehurst",
      "url" : "https://wiremock.org",
      "sameAs" : null
    }
  </script>






<!-- end SEO -->





  <!-- Google Analytics -->
<style>.async-hide { opacity: 0 !important} </style>
<!--<script>(function(a,s,y,n,c,h,i,d,e){s.className+=' '+y;h.start=1*new Date;-->
  <!--h.end=i=function(){s.className=s.className.replace(RegExp(' ?'+y),'')};-->
  <!--(a[n]=a[n]||[]).hide=h;setTimeout(function(){i();h.end=null},c);h.timeout=c;-->
<!--})(window,document.documentElement,'async-hide','dataLayer',4000,-->
  <!--{'GTM-WQTGSSM':true});</script>-->

<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
      (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
    m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-36386229-2', 'auto');
  ga('require', 'GTM-WQTGSSM');
  ga('send', 'pageview');
</script>
<!-- End Google Analytics -->



<script>
    (function(h,o,t,j,a,r){
        h.hj=h.hj||function(){(h.hj.q=h.hj.q||[]).push(arguments)};
        h._hjSettings={hjid:2905132,hjsv:6};
        a=o.getElementsByTagName('head')[0];
        r=o.createElement('script');r.async=1;
        r.src=t+h._hjSettings.hjid+j+h._hjSettings.hjsv;
        a.appendChild(r);
    })(window,document,'https://static.hotjar.com/c/hotjar-','.js?sv=');
</script>

<script>
    (function(c,l,a,r,i,t,y){
        c[a]=c[a]||function(){(c[a].q=c[a].q||[]).push(arguments)};
        t=l.createElement(r);t.async=1;t.src="https://www.clarity.ms/tag/"+i+"?ref=bwt";
        y=l.getElementsByTagName(r)[0];y.parentNode.insertBefore(t,y);
    })(window, document, "clarity", "script", "e4hf2fljrd");
</script>


<link href="https://wiremock.org/feed.xml" type="application/atom+xml" rel="alternate" title="WireMock Feed">

<!-- http://t.co/dKP3o1e -->
<meta name="HandheldFriendly" content="True">
<meta name="MobileOptimized" content="320">
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<script>
  document.documentElement.className = document.documentElement.className.replace(/\bno-js\b/g, '') + ' js ';
</script>

<link href="https://fonts.googleapis.com/css?family=Lato|Source+Code+Pro|Cairo" rel="stylesheet">
<link rel="preconnect" href="https://fonts.googleapis.com">
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
<link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@400;500;600;700;800&family=Open+Sans:wght@300;400;500;600;700;800&family=Roboto:wght@400;500;700&family=Ubuntu:wght@400;500;700&display=swap" rel="stylesheet">

<!-- For all browsers -->
<link rel="stylesheet" href="https://wiremock.org/assets/css/main.css">

<meta http-equiv="cleartype" content="on">

<link rel="shortcut icon" type="image/x-icon" href="https://wiremock.org/images/favicon.svg">

    <!-- start custom head snippets -->

<!-- insert favicons. use http://realfavicongenerator.net/ -->

<!-- end custom head snippets -->
  </head>

  <body>
    <!--[if lt IE 9]>
<div class="notice--danger align-center" style="margin: 0;">You are using an <strong>outdated</strong> browser. Please <a href="http://browsehappy.com/">upgrade your browser</a> to improve your experience.</div>
<![endif]-->
    

<style>
  .navlink {
    position: relative !important;
    color: #7d93bd;
    padding-bottom: 0.9rem;
    cursor: pointer;
    font-family: "Ubuntu";
    font-style: normal;
    font-weight: 400;
    font-size: 14px;
  }

  .divSubNav {
    position: relative;
    cursor: default;
    padding: 10px 15px;
    display: none;
    position: absolute;
    content: "";
    left: 0;
    top: 32px;
    width: fit-content;
    background: #FFFFFF;
    box-shadow: 0px -5px 20px rgba(210, 223, 249, 0.5);
  }

  .divSubNav::before {
    position: absolute;
    content: "";
    left: 15px;
    width: 0; 
    height: 0; 
    border-left: 5px solid transparent;
    border-right: 5px solid transparent;
    border-bottom: 7px solid #fff;
    top: -7px;
  }

  .divSubNav a {
    padding: 0 !important;
    margin: 0 0 5px 0;
    width: fit-content !important;
  }

  .divSubNav a:last-child {
    margin-bottom: 0;
  }

  .divSubNav a::before {
    background: none !important;
    
  }

  .navlink:hover > .divSubNav {
    display: block;
  }

  .navlink::before {
    background: unset !important;
  }
  .navHover::before {
    background: unset !important;
  }
</style>

<div class="masthead">
  <div class="masthead__inner-wrap">
    <div class="masthead__menu">
      <a href="/"><img src="https://wiremock.org/images/wireMockLogo.png" style="width: 160px; height: 20px" /></a>
      <nav id="site-nav" class="greedy-nav">
        <!-- <button><div class="navicon"></div></button> -->
        <ul class="visible-links">
          
          
            

            

            
            
            <li class="masthead__menu-item">
              
                <span class="navlink">
                  Docs

                  
                  <div class="divSubNav">
                    
                      <a href="/docs/">
                        WireMock Open Source
                      </a>
                    
                      <a href="https://docs.wiremock.io/getting-started/?utm_source=wiremock.org&utm_medium=masthead_doc-links&utm_campaign=2022_baseline">
                        WireMock Cloud
                      </a>
                    
                      <a href="/studio/docs/">
                        WireMock Studio
                      </a>
                    
                      <a href="https://www.mocklab.io/docs/getting-started/?utm_source=wiremock.org&utm_medium=masthead_doc-links&utm_campaign=2022_baseline">
                        MockLab
                      </a>
                    
                  </div>
                  
                </span>
              
              
            </li>
            
            

          
            

            

            
            
            <li class="masthead__menu-item">
              
                <a class="base_path navHover" href="https://wiremock.org/support" title="Support">
                  Support
                </a>
              
              
            </li>
            
            

          
            

            

            
            
            <li class="masthead__menu-item">
              
                <span class="navlink">
                  Community

                  
                  <div class="divSubNav">
                    
                      <a href="https://github.com/wiremock/wiremock">
                        GitHub
                      </a>
                    
                      <a href="https://join.slack.com/t/wiremock-community/shared_invite/zt-1mkbo0zlx-gxeZdTJ15Kchdt888Fn_1A">
                        Slack
                      </a>
                    
                      <a href="https://github.com/wiremock/wiremock/blob/master/CONTRIBUTING.md">
                        Contributing
                      </a>
                    
                      <a href="/external-resources">
                        Resources
                      </a>
                    
                  </div>
                  
                </span>
              
              
            </li>
            
            

          

          <li class="masthead__menu-item">
            <a class="navHover" href="https://wiremock.io?utm_source=wiremock.org&utm_medium=masthead&utm_campaign=homepage_2022_baseline" title="WireMock Cloud">
              <img src="/images/wiremock-cloud/wiremock_cloud_logo.png" alt="WireMock Cloud" style="vertical-align: middle;height: 28px"/>
            </a>
          </li>
        </ul>
        
      </nav>
      
      <img id="hamburgerMenuIcon" class="hamburgerMenuIcon" src="https://wiremock.org/images/hamburgerMenuIcon.svg" />
      <div id="overlay-menu" class="overlay-menu"></div>
      <div class="mobile-menu-wrapper">
        <img id="closeMenuIcon" class="closeMenuIcon" src="https://wiremock.org/images/closeMenuIcon.svg" />
        <ul>
          <li><a href="/docs">Open Source docs</a></li>
          <li>
            <a href="https://wiremock.io?utm_source=wiremock.org&utm_medium=masthead&utm_campaign=homepage_2022_baseline" title="WireMock Cloud">
              <img src="/images/wiremock-cloud/wiremock_cloud_logo.png" alt="WireMock Cloud" style="vertical-align: middle;height: 28px"/><br>
              WireMock Cloud docs
            </a>
          </li>
          <li><a href="/studio/docs">Studio docs</a></li>
          
          <li><a href="/support">Support</a></li>
          <li><a href="https://github.com/wiremock/wiremock" target="_blank">GitHub</a></li>
          <li><a href="https://github.com/wiremock/wiremock/blob/master/CONTRIBUTING.md" target="_blank">Contributing</a></li>
          <li><a href="/external-resources">Resources</a></li>
        </ul>
      </div>
    </div>
  </div>
</div>


    

<div id="main" class="custom-doc-wrapper" role="main">

  
    

<div class="sidebar">
  <nav class="nav__list">
    <ul class="doc-categories">
      
      
        <li class="doc-category">
          <span class="doc-category__title">Setup</span>
          <ul class="
          doc-category__sub-nav
          
          ">
            
              
              
              
              
              <li class="doc-category__li">
                <a href="/docs/getting-started/">Getting Started</a>
              </li>
            
              
              
              
              
              <li class="doc-category__li">
                <a href="/docs/download-and-installation/">Download and Installation</a>
              </li>
            
              
              
              
              
              <li class="doc-category__li">
                <a href="/docs/running-standalone/">Running as a Standalone Process</a>
              </li>
            
              
              
              
              
              <li class="doc-category__li">
                <a href="/docs/docker/">Running in Docker</a>
              </li>
            
              
              
              
              
              <li class="doc-category__li">
                <a href="/docs/android/">Running on Android</a>
              </li>
            
              
              
              
              
              <li class="doc-category__li">
                <a href="/docs/spring-boot/">Using with Spring Boot</a>
              </li>
            
          </ul>
        </li>
      
      
        <li class="doc-category">
          <span class="doc-category__title">Configuration</span>
          <ul class="
          doc-category__sub-nav
          
          ">
            
              
              
              
              
              <li class="doc-category__li">
                <a href="/docs/https/">HTTPS</a>
              </li>
            
              
              
              
              
              <li class="doc-category__li">
                <a href="/docs/multi-domain-mocking/">Multi-domain Mocking</a>
              </li>
            
          </ul>
        </li>
      
      
        <li class="doc-category">
          <span class="doc-category__title">Java Usage</span>
          <ul class="
          doc-category__sub-nav
          
          ">
            
              
              
              
              
              <li class="doc-category__li">
                <a href="/docs/junit-jupiter/">JUnit 5+ Jupiter</a>
              </li>
            
              
              
              
              
              <li class="doc-category__li">
                <a href="/docs/junit-extensions/">JUnit 4 and Vintage</a>
              </li>
            
              
              
              
              
              <li class="doc-category__li">
                <a href="/docs/java-usage/">Plain Java</a>
              </li>
            
              
              
              
              
              <li class="doc-category__li">
                <a href="/docs/configuration/">Java configuration</a>
              </li>
            
              
              
              
              
              <li class="doc-category__li">
                <a href="/docs/running-without-http-server/">Running without the HTTP Server</a>
              </li>
            
          </ul>
        </li>
      
      
        <li class="doc-category">
          <span class="doc-category__title">Stubbing & Verifying</span>
          <ul class="
          doc-category__sub-nav
          doc-category__sub-nav--active
          ">
            
              
              
              
              
              <li class="doc-category__li">
                <a href="/docs/stubbing/">Stubbing</a>
              </li>
            
              
              
              
              
              <li class="doc-category__li">
                <a href="/docs/request-matching/">Request Matching</a>
              </li>
            
              
              
              
              
              <li class="doc-category__li">
                <a href="/docs/response-templating/">Response Templating</a>
              </li>
            
              
              
              
              
              <li class="doc-category__li">
                <a href="/docs/simulating-faults/">Simulating Faults</a>
              </li>
            
              
              
              
              
              <li class="doc-category__li">
                <a href="/docs/stateful-behaviour/">Stateful Behaviour</a>
              </li>
            
              
              
              
              
              <li class="doc-category__li">
                <a href="/docs/proxying/">Proxying</a>
              </li>
            
              
              
              
              
              <li class="doc-category__li doc-category__li--selected">
                <a href="/docs/verifying/">Verifying</a>
              </li>
            
          </ul>
        </li>
      
      
        <li class="doc-category">
          <span class="doc-category__title">Record & Playback</span>
          <ul class="
          doc-category__sub-nav
          
          ">
            
              
              
              
              
              <li class="doc-category__li">
                <a href="/docs/record-playback/">Record and Playback</a>
              </li>
            
          </ul>
        </li>
      
      
        <li class="doc-category">
          <span class="doc-category__title">Extensibility</span>
          <ul class="
          doc-category__sub-nav
          
          ">
            
              
              
              
              
              <li class="doc-category__li">
                <a href="/docs/extending-wiremock/">Extending WireMock</a>
              </li>
            
              
              
              
              
              <li class="doc-category__li">
                <a href="/docs/stub-metadata/">Stub Metadata</a>
              </li>
            
              
              
              
              
              <li class="doc-category__li">
                <a href="/docs/webhooks-and-callbacks/">Webhooks and Callbacks</a>
              </li>
            
          </ul>
        </li>
      
      
        <li class="doc-category">
          <span class="doc-category__title">Reference</span>
          <ul class="
          doc-category__sub-nav
          
          ">
            
              
              
              
              
              <li class="doc-category__li">
                <a href="/docs/api/">Admin API </a>
              </li>
            
          </ul>
        </li>
      
    </ul>

  </nav>
</div>

  

  

  <article class="page" itemscope itemtype="http://schema.org/CreativeWork">
    
    <meta itemprop="description" content="The WireMock server records all requests it receives in memory (atleast until it is reset). This makes it possible to verify thata request matching a specific pattern was received, and also to fetchthe requests’ details.">
    <meta itemprop="datePublished" content="January 26, 2023">
    

    <div style="background-color: #f2f2f2;border: #c8c8c8 1px solid;padding: 8px;margin-bottom:32px;">
      <a href="https://join.slack.com/t/wiremock-community/shared_invite/zt-1mkbo0zlx-gxeZdTJ15Kchdt888Fn_1A"><img src="/images/slack-logo-medium.png" alt="Slack logo" style="vertical-align:sub;height:22px;margin-left:7px;margin-right:8px"/></a>
      Need help? Join the <a href="https://join.slack.com/t/wiremock-community/shared_invite/zt-1mkbo0zlx-gxeZdTJ15Kchdt888Fn_1A">WireMock community Slack</a>
    </div>

    <div class="page__inner-wrap">
      <header>
        <h1 class="page__title" itemprop="headline">Verifying
</h1>
      </header>

      <section class="page__content" itemprop="text">
        <p>The WireMock server records all requests it receives in memory (at
least until it is <a href="/docs/stubbing#reset">reset</a>). This makes it possible to verify that
a request matching a specific pattern was received, and also to fetch
the requests’ details.</p>

<p>Verifying and querying requests relies on the request journal, which is an in-memory log
of received requests. This can be disabled for load testing - see the <a href="/docs/configuration/">Configuration</a> section for details.</p>

<p>Like stubbing, verification also uses WireMock’s <a href="/docs/request-matching/">Request Matching</a> system to filter and query requests.</p>

<h2 id="verification-failures-console-output-and-intellij">Verification failures, console output and IntelliJ</h2>

<p>When verifying via the Java API all failed verifications will result in a <code class="language-plaintext highlighter-rouge">VerificationException</code> being thrown.
<img src="/images/verification-exception.png" alt="Verification exception" /></p>

<p>The message text in the exception is formatted to enable IntelliJ’s failure comparison view:
<img src="/images/idea-comparison-failure.png" alt="Comparison failure" /></p>

<h2 id="verifying-in-java">Verifying in Java</h2>

<p>To verify that a request matching some criteria was received by WireMock
at least once:</p>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">verify</span><span class="o">(</span><span class="n">postRequestedFor</span><span class="o">(</span><span class="n">urlEqualTo</span><span class="o">(</span><span class="s">"/verify/this"</span><span class="o">))</span>
        <span class="o">.</span><span class="na">withHeader</span><span class="o">(</span><span class="s">"Content-Type"</span><span class="o">,</span> <span class="n">equalTo</span><span class="o">(</span><span class="s">"text/xml"</span><span class="o">)));</span>
</code></pre></div></div>

<p>The criteria part in the parameter to <code class="language-plaintext highlighter-rouge">postRequestedFor()</code> uses the same
builder as for stubbing, so all of the same predicates are available.
See <a href="/docs/stubbing/">Stubbing</a> for more details.</p>

<p>To check for a precise number of requests matching the criteria, use
this form:</p>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">verify</span><span class="o">(</span><span class="mi">3</span><span class="o">,</span> <span class="n">postRequestedFor</span><span class="o">(</span><span class="n">urlEqualTo</span><span class="o">(</span><span class="s">"/three/times"</span><span class="o">)));</span>
</code></pre></div></div>

<p>Or you can use some more advanced comparison operators:</p>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">verify</span><span class="o">(</span><span class="n">lessThan</span><span class="o">(</span><span class="mi">5</span><span class="o">),</span> <span class="n">postRequestedFor</span><span class="o">(</span><span class="n">urlEqualTo</span><span class="o">(</span><span class="s">"/many"</span><span class="o">)));</span>
<span class="n">verify</span><span class="o">(</span><span class="n">lessThanOrExactly</span><span class="o">(</span><span class="mi">5</span><span class="o">),</span> <span class="n">postRequestedFor</span><span class="o">(</span><span class="n">urlEqualTo</span><span class="o">(</span><span class="s">"/many"</span><span class="o">)));</span>
<span class="n">verify</span><span class="o">(</span><span class="n">exactly</span><span class="o">(</span><span class="mi">5</span><span class="o">),</span> <span class="n">postRequestedFor</span><span class="o">(</span><span class="n">urlEqualTo</span><span class="o">(</span><span class="s">"/many"</span><span class="o">)));</span>
<span class="n">verify</span><span class="o">(</span><span class="n">moreThanOrExactly</span><span class="o">(</span><span class="mi">5</span><span class="o">),</span> <span class="n">postRequestedFor</span><span class="o">(</span><span class="n">urlEqualTo</span><span class="o">(</span><span class="s">"/many"</span><span class="o">)));</span>
<span class="n">verify</span><span class="o">(</span><span class="n">moreThan</span><span class="o">(</span><span class="mi">5</span><span class="o">),</span> <span class="n">postRequestedFor</span><span class="o">(</span><span class="n">urlEqualTo</span><span class="o">(</span><span class="s">"/many"</span><span class="o">)));</span>
</code></pre></div></div>

<h2 id="verifying-via-the-json--http-api">Verifying via the JSON + HTTP API</h2>

<p>There isn’t a direct JSON equivalent to the above Java API. However,
it’s possible to achieve the same effect by requesting a count of the
number of requests matching the specified criteria (and in fact this is
what the Java method does under the hood).</p>

<p>This can be done by posting a JSON document containing the criteria to
<code class="language-plaintext highlighter-rouge">http://&lt;host&gt;:&lt;port&gt;/__admin/requests/count</code>:</p>

<div class="language-json highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="p">{</span><span class="w">
    </span><span class="nl">"method"</span><span class="p">:</span><span class="w"> </span><span class="s2">"POST"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"url"</span><span class="p">:</span><span class="w"> </span><span class="s2">"/resource/to/count"</span><span class="p">,</span><span class="w">
    </span><span class="nl">"headers"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="nl">"Content-Type"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
            </span><span class="nl">"matches"</span><span class="p">:</span><span class="w"> </span><span class="s2">".*/xml"</span><span class="w">
        </span><span class="p">}</span><span class="w">
    </span><span class="p">}</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div></div>

<p>A response of this form will be returned:</p>

<div class="language-json highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="p">{</span><span class="w"> </span><span class="nl">"count"</span><span class="p">:</span><span class="w"> </span><span class="mi">4</span><span class="w"> </span><span class="p">}</span><span class="w">
</span></code></pre></div></div>

<h2 id="querying-the-request-journal">Querying the request journal</h2>

<h2 id="getting-all-requests">Getting all requests</h2>

<p>All requests received by WireMock since the last reset can be fetched,
along with additional data about whether the request was matched by a stub mapping and the resulting response definition.</p>

<p>In Java:</p>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nc">List</span><span class="o">&lt;</span><span class="nc">ServeEvent</span><span class="o">&gt;</span> <span class="n">allServeEvents</span> <span class="o">=</span> <span class="n">getAllServeEvents</span><span class="o">();</span>
</code></pre></div></div>

<p>And via the HTTP API by sending a <code class="language-plaintext highlighter-rouge">GET</code> to <code class="language-plaintext highlighter-rouge">http://&lt;host&gt;:&lt;port&gt;/__admin/requests</code>:</p>

<div class="language-json highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="p">{</span><span class="w">
    </span><span class="nl">"requests"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
        </span><span class="p">{</span><span class="w">
            </span><span class="nl">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"95bd9a40-82d4-47ce-9383-25a9e972f05d"</span><span class="p">,</span><span class="w">
            </span><span class="nl">"request"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
                </span><span class="nl">"url"</span><span class="p">:</span><span class="w"> </span><span class="s2">"/received-request/7"</span><span class="p">,</span><span class="w">
                </span><span class="nl">"absoluteUrl"</span><span class="p">:</span><span class="w"> </span><span class="s2">"http://localhost:51490/received-request/7"</span><span class="p">,</span><span class="w">
                </span><span class="nl">"method"</span><span class="p">:</span><span class="w"> </span><span class="s2">"GET"</span><span class="p">,</span><span class="w">
                </span><span class="nl">"clientIp"</span><span class="p">:</span><span class="w"> </span><span class="s2">"127.0.0.1"</span><span class="p">,</span><span class="w">
                </span><span class="nl">"headers"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
                    </span><span class="nl">"Connection"</span><span class="p">:</span><span class="w"> </span><span class="s2">"keep-alive"</span><span class="p">,</span><span class="w">
                    </span><span class="nl">"User-Agent"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Apache-HttpClient/4.5.1 (Java/1.8.0_45)"</span><span class="p">,</span><span class="w">
                    </span><span class="nl">"Host"</span><span class="p">:</span><span class="w"> </span><span class="s2">"localhost:51490"</span><span class="w">
                </span><span class="p">},</span><span class="w">
                </span><span class="nl">"cookies"</span><span class="p">:</span><span class="w"> </span><span class="p">{},</span><span class="w">
                </span><span class="nl">"browserProxyRequest"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
                </span><span class="nl">"loggedDate"</span><span class="p">:</span><span class="w"> </span><span class="mi">1475495213275</span><span class="p">,</span><span class="w">
                </span><span class="nl">"bodyAsBase64"</span><span class="p">:</span><span class="w"> </span><span class="s2">""</span><span class="p">,</span><span class="w">
                </span><span class="nl">"body"</span><span class="p">:</span><span class="w"> </span><span class="s2">""</span><span class="p">,</span><span class="w">
                </span><span class="nl">"loggedDateString"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2016-10-03T11:46:53Z"</span><span class="w">
            </span><span class="p">},</span><span class="w">
            </span><span class="nl">"responseDefinition"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
                </span><span class="nl">"status"</span><span class="p">:</span><span class="w"> </span><span class="mi">200</span><span class="p">,</span><span class="w">
                </span><span class="nl">"body"</span><span class="p">:</span><span class="w"> </span><span class="s2">"This was matched"</span><span class="w">
            </span><span class="p">},</span><span class="w">
            </span><span class="nl">"wasMatched"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="w">
        </span><span class="p">},</span><span class="w">
        </span><span class="p">{</span><span class="w">
            </span><span class="nl">"id"</span><span class="p">:</span><span class="w"> </span><span class="s2">"aa1a4250-f87c-4a17-82e3-79c83441ce03"</span><span class="p">,</span><span class="w">
            </span><span class="nl">"request"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
                </span><span class="nl">"url"</span><span class="p">:</span><span class="w"> </span><span class="s2">"/received-request/6"</span><span class="p">,</span><span class="w">
                </span><span class="nl">"absoluteUrl"</span><span class="p">:</span><span class="w"> </span><span class="s2">"http://localhost:51490/received-request/6"</span><span class="p">,</span><span class="w">
                </span><span class="nl">"method"</span><span class="p">:</span><span class="w"> </span><span class="s2">"GET"</span><span class="p">,</span><span class="w">
                </span><span class="nl">"clientIp"</span><span class="p">:</span><span class="w"> </span><span class="s2">"127.0.0.1"</span><span class="p">,</span><span class="w">
                </span><span class="nl">"headers"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
                    </span><span class="nl">"Connection"</span><span class="p">:</span><span class="w"> </span><span class="s2">"keep-alive"</span><span class="p">,</span><span class="w">
                    </span><span class="nl">"User-Agent"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Apache-HttpClient/4.5.1 (Java/1.8.0_45)"</span><span class="p">,</span><span class="w">
                    </span><span class="nl">"Host"</span><span class="p">:</span><span class="w"> </span><span class="s2">"localhost:51490"</span><span class="w">
                </span><span class="p">},</span><span class="w">
                </span><span class="nl">"cookies"</span><span class="p">:</span><span class="w"> </span><span class="p">{},</span><span class="w">
                </span><span class="nl">"browserProxyRequest"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
                </span><span class="nl">"loggedDate"</span><span class="p">:</span><span class="w"> </span><span class="mi">1475495213268</span><span class="p">,</span><span class="w">
                </span><span class="nl">"bodyAsBase64"</span><span class="p">:</span><span class="w"> </span><span class="s2">""</span><span class="p">,</span><span class="w">
                </span><span class="nl">"body"</span><span class="p">:</span><span class="w"> </span><span class="s2">""</span><span class="p">,</span><span class="w">
                </span><span class="nl">"loggedDateString"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2016-10-03T11:46:53Z"</span><span class="w">
            </span><span class="p">},</span><span class="w">
            </span><span class="nl">"responseDefinition"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
                </span><span class="nl">"status"</span><span class="p">:</span><span class="w"> </span><span class="mi">404</span><span class="p">,</span><span class="w">
                </span><span class="nl">"transformers"</span><span class="p">:</span><span class="w"> </span><span class="p">[],</span><span class="w">
                </span><span class="nl">"fromConfiguredStub"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
                </span><span class="nl">"transformerParameters"</span><span class="p">:</span><span class="w"> </span><span class="p">{}</span><span class="w">
            </span><span class="p">},</span><span class="w">
            </span><span class="nl">"wasMatched"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="w">
        </span><span class="p">}</span><span class="w">
    </span><span class="p">],</span><span class="w">
    </span><span class="nl">"meta"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
        </span><span class="nl">"total"</span><span class="p">:</span><span class="w"> </span><span class="mi">2</span><span class="w">
    </span><span class="p">},</span><span class="w">
    </span><span class="nl">"requestJournalDisabled"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div></div>

<h3 id="filtering-events">Filtering events</h3>

<p>Optionally the results can be filtered to those occuring after a specififed (ISO8601) date-time. Also, the result set can optionally be limited in size
e.g. to return the most recent three results after the 7th of June 2016 12pm send:
<code class="language-plaintext highlighter-rouge">GET http://localhost:8080/__admin/requests?since=2016-06-06T12:00:00&amp;limit=3</code></p>

<p>Results can also be filtered to include only unmatched requests via a query parameter:</p>

<p><code class="language-plaintext highlighter-rouge">GET http://localhost:8080/__admin/requests?unmatched=true</code></p>

<p>In Java:</p>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nc">List</span><span class="o">&lt;</span><span class="nc">ServeEvent</span><span class="o">&gt;</span> <span class="n">serveEvents</span> <span class="o">=</span> <span class="n">getAllServeEvents</span><span class="o">(</span><span class="nc">ServeEventQuery</span><span class="o">.</span><span class="na">ALL_UNMATCHED</span><span class="o">);</span>
</code></pre></div></div>

<p>Likewise, the results can be filtered to include only requests matching a specific stub ID:</p>

<p><code class="language-plaintext highlighter-rouge">GET http://localhost:8080/__admin/requests?matchingStub=59651373-6deb-4707-847c-9e8caf63266e</code></p>

<p>In Java:</p>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nc">List</span><span class="o">&lt;</span><span class="nc">ServeEvent</span><span class="o">&gt;</span> <span class="n">serveEvents</span> <span class="o">=</span>
  <span class="n">getAllServeEvents</span><span class="o">(</span><span class="nc">ServeEventQuery</span><span class="o">.</span><span class="na">forStubMapping</span><span class="o">(</span><span class="n">myStubId</span><span class="o">));</span>
</code></pre></div></div>

<h3 id="criteria-queries">Criteria queries</h3>

<p>The request journal can also be queried, taking a request pattern as the filter criteria. In Java:</p>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nc">List</span><span class="o">&lt;</span><span class="nc">LoggedRequest</span><span class="o">&gt;</span> <span class="n">requests</span> <span class="o">=</span> <span class="n">findAll</span><span class="o">(</span><span class="n">putRequestedFor</span><span class="o">(</span><span class="n">urlMatching</span><span class="o">(</span><span class="s">"/api/.*"</span><span class="o">)));</span>
</code></pre></div></div>

<p>And in JSON + HTTP by posting a criteria document (of the same form as
for request counting) to <code class="language-plaintext highlighter-rouge">http://&lt;host&gt;:&lt;port&gt;/__admin/requests/find</code>,
which will return a response like this:</p>

<div class="language-json highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="p">{</span><span class="w">
    </span><span class="nl">"requests"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
        </span><span class="p">{</span><span class="w">
            </span><span class="nl">"url"</span><span class="p">:</span><span class="w"> </span><span class="s2">"/my/url"</span><span class="p">,</span><span class="w">
            </span><span class="nl">"absoluteUrl"</span><span class="p">:</span><span class="w"> </span><span class="s2">"http://mydomain.com/my/url"</span><span class="p">,</span><span class="w">
            </span><span class="nl">"method"</span><span class="p">:</span><span class="w"> </span><span class="s2">"GET"</span><span class="p">,</span><span class="w">
            </span><span class="nl">"headers"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
                </span><span class="nl">"Accept-Language"</span><span class="p">:</span><span class="w"> </span><span class="s2">"en-us,en;q=0.5"</span><span class="p">,</span><span class="w">
                </span><span class="nl">"User-Agent"</span><span class="p">:</span><span class="w"> </span><span class="s2">"Mozilla/5.0 (Macintosh; Intel Mac OS X 10.6; rv:9.0) Gecko/20100101 Firefox/9.0"</span><span class="p">,</span><span class="w">
                </span><span class="nl">"Accept"</span><span class="p">:</span><span class="w"> </span><span class="s2">"image/png,image/*;q=0.8,*/*;q=0.5"</span><span class="w">
            </span><span class="p">},</span><span class="w">
            </span><span class="nl">"body"</span><span class="p">:</span><span class="w"> </span><span class="s2">""</span><span class="p">,</span><span class="w">
            </span><span class="nl">"browserProxyRequest"</span><span class="p">:</span><span class="w"> </span><span class="kc">true</span><span class="p">,</span><span class="w">
            </span><span class="nl">"loggedDate"</span><span class="p">:</span><span class="w"> </span><span class="mi">1339083581823</span><span class="p">,</span><span class="w">
            </span><span class="nl">"loggedDateString"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2012-06-07 16:39:41"</span><span class="w">
        </span><span class="p">},</span><span class="w">
        </span><span class="p">{</span><span class="w">
            </span><span class="nl">"url"</span><span class="p">:</span><span class="w"> </span><span class="s2">"/my/other/url"</span><span class="p">,</span><span class="w">
            </span><span class="nl">"absoluteUrl"</span><span class="p">:</span><span class="w"> </span><span class="s2">"http://my.other.domain.com/my/other/url"</span><span class="p">,</span><span class="w">
            </span><span class="nl">"method"</span><span class="p">:</span><span class="w"> </span><span class="s2">"POST"</span><span class="p">,</span><span class="w">
            </span><span class="nl">"headers"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
                </span><span class="nl">"Accept"</span><span class="p">:</span><span class="w"> </span><span class="s2">"text/plain"</span><span class="p">,</span><span class="w">
                </span><span class="nl">"Content-Type"</span><span class="p">:</span><span class="w"> </span><span class="s2">"text/plain"</span><span class="w">
            </span><span class="p">},</span><span class="w">
            </span><span class="nl">"body"</span><span class="p">:</span><span class="w"> </span><span class="s2">"My text"</span><span class="p">,</span><span class="w">
            </span><span class="nl">"browserProxyRequest"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
            </span><span class="nl">"loggedDate"</span><span class="p">:</span><span class="w"> </span><span class="mi">1339083581823</span><span class="p">,</span><span class="w">
            </span><span class="nl">"loggedDateString"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2012-06-07 16:39:41"</span><span class="w">
        </span><span class="p">}</span><span class="w">
    </span><span class="p">]</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div></div>

<h2 id="removing-items-from-the-journal">Removing items from the journal</h2>

<h3 id="by-id">By ID</h3>

<p>An individual journal event can be removed via the Java API:</p>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">removeServeEvent</span><span class="o">(</span><span class="n">id</span><span class="o">);</span>
</code></pre></div></div>

<p>Or via the HTTP API by issuing a <code class="language-plaintext highlighter-rouge">DELETE</code> to <code class="language-plaintext highlighter-rouge">http://&lt;host&gt;:&lt;port&gt;/__admin/requests/{id}</code>.</p>

<h3 id="by-criteria">By criteria</h3>

<p>Events can also be removed from the request journal by criteria (in the same manner as for finding them described in <a href="#criteria-queries">Criteria queries</a>).</p>

<p>Using the Java DSL:</p>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">removeServeEvents</span><span class="o">(</span><span class="n">putRequestedFor</span><span class="o">(</span><span class="n">urlMatching</span><span class="o">(</span><span class="s">"/api/.*"</span><span class="o">)</span>
    <span class="o">.</span><span class="na">withHeader</span><span class="o">(</span><span class="s">"X-Trace-Id"</span><span class="o">,</span> <span class="n">equalTo</span><span class="o">(</span><span class="s">"123"</span><span class="o">))));</span>
</code></pre></div></div>

<p>Or via the HTTP API:</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>POST http://&lt;host&gt;:&lt;port&gt;/__admin/requests/remove

{
    "method": "PUT",
    "urlPattern": "/api/.*",
    "headers": {
        "X-Trace-Id": {
            "equalTo": "123"
        }
    }
}
</code></pre></div></div>

<h3 id="by-stub-metadata">By stub metadata</h3>

<p>In situations where it isn’t possible to precisely identify log events for removal from request attributes alone, the metadata
associated with stubs matching requests can be used for selection. For instance, your test code might create stubs tagged
with test case identifiers, then use these to clean up events created by the test:</p>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="n">stubFor</span><span class="o">(</span><span class="n">get</span><span class="o">(</span><span class="s">"/api/dosomething/123"</span><span class="o">)</span>
    <span class="o">.</span><span class="na">withMetadata</span><span class="o">(</span><span class="n">metadata</span><span class="o">()</span>
        <span class="o">.</span><span class="na">list</span><span class="o">(</span><span class="s">"tags"</span><span class="o">,</span> <span class="s">"test-57"</span><span class="o">)</span>
    <span class="o">));</span>

<span class="n">testClient</span><span class="o">.</span><span class="na">get</span><span class="o">(</span><span class="s">"/api/dosomething/123"</span><span class="o">);</span>

<span class="nc">List</span><span class="o">&lt;</span><span class="nc">ServeEvent</span><span class="o">&gt;</span> <span class="n">removedServeEvents</span> <span class="o">=</span> <span class="n">removeEventsByStubMetadata</span><span class="o">(</span><span class="n">matchingJsonPath</span><span class="o">(</span><span class="s">"$.tags[0]"</span><span class="o">,</span> <span class="n">equalTo</span><span class="o">(</span><span class="s">"test-57"</span><span class="o">)));</span>
</code></pre></div></div>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>POST /__admin/requests/remove-by-metadata

{
    "matchesJsonPath" : {
      "expression" : "$.tags[0]",
      "equalTo" : "test-57"
    }
}
</code></pre></div></div>

<p>For more info about stub metadata see <a href="/docs/stub-metadata/">Stub Metadata</a></p>

<h2 id="resetting-the-request-journal">Resetting the request journal</h2>

<p>The request log can be reset at any time. If you’re using either of the
JUnit rules this will happen automatically at the start of every test
case. However you can do it yourself via a call to
<code class="language-plaintext highlighter-rouge">WireMock.resetAllRequests()</code> in Java or sending a <code class="language-plaintext highlighter-rouge">DELETE</code> request to <code class="language-plaintext highlighter-rouge">http://&lt;host&gt;:&lt;port&gt;/__admin/requests</code>.</p>

<h2 id="finding-unmatched-requests">Finding unmatched requests</h2>

<p>To find all requests which were received but not matched by a configured stub (i.e. received the default 404 response) do the following in Java:</p>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nc">List</span><span class="o">&lt;</span><span class="nc">LoggedRequest</span><span class="o">&gt;</span> <span class="n">unmatched</span> <span class="o">=</span> <span class="nc">WireMock</span><span class="o">.</span><span class="na">findUnmatchedRequests</span><span class="o">();</span>
</code></pre></div></div>

<p>To find unmatched requests via the HTTP API, make a <code class="language-plaintext highlighter-rouge">GET</code> request to <code class="language-plaintext highlighter-rouge">/__admin/requests/unmatched</code>:</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>GET http://localhost:8080/__admin/requests/unmatched
<span class="o">{</span>
  <span class="s2">"requests"</span> : <span class="o">[</span> <span class="o">{</span>
    <span class="s2">"url"</span> : <span class="s2">"/nomatch"</span>,
    <span class="s2">"absoluteUrl"</span> : <span class="s2">"http://localhost:8080/nomatch"</span>,
    <span class="s2">"method"</span> : <span class="s2">"GET"</span>,
    <span class="s2">"clientIp"</span> : <span class="s2">"0:0:0:0:0:0:0:1"</span>,
    <span class="s2">"headers"</span> : <span class="o">{</span>
      <span class="s2">"User-Agent"</span> : <span class="s2">"curl/7.30.0"</span>,
      <span class="s2">"Accept"</span> : <span class="s2">"*/*"</span>,
      <span class="s2">"Host"</span> : <span class="s2">"localhost:8080"</span>
    <span class="o">}</span>,
    <span class="s2">"cookies"</span> : <span class="o">{</span> <span class="o">}</span>,
    <span class="s2">"browserProxyRequest"</span> : <span class="nb">false</span>,
    <span class="s2">"loggedDate"</span> : 1467402464520,
    <span class="s2">"bodyAsBase64"</span> : <span class="s2">""</span>,
    <span class="s2">"body"</span> : <span class="s2">""</span>,
    <span class="s2">"loggedDateString"</span> : <span class="s2">"2016-07-01T19:47:44Z"</span>
  <span class="o">}</span> <span class="o">]</span>,
  <span class="s2">"requestJournalDisabled"</span> : <span class="nb">false</span>
<span class="o">}</span>
</code></pre></div></div>

<h2 id="near-misses">Near misses</h2>

<p>“Near Misses” are enabled by the new “distance” concept added to the matching system.
A near miss is essentially a pairing of a request and request pattern that are not an exact match for each other, that can be ranked by distance.
This is useful when debugging test failures as it is quite common for a request not to be matched to a stub due to a minor difference e.g. a miscapitalised character.</p>

<p>Near misses can either represent the closest stubs to a given request, or the closest requests to a given request pattern depending on the type of query submitted.</p>

<p>To find near misses representing stub mappings closest to the specified request in Java:</p>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nc">List</span><span class="o">&lt;</span><span class="nc">NearMiss</span><span class="o">&gt;</span> <span class="n">nearMisses</span> <span class="o">=</span> <span class="nc">WireMock</span><span class="o">.</span><span class="na">findNearMissesFor</span><span class="o">(</span><span class="n">myLoggedRequest</span><span class="o">);</span>
</code></pre></div></div>

<p>To do the same via the HTTP API:</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>POST /__admin/near-misses/request

<span class="o">{</span>
  <span class="s2">"url"</span>: <span class="s2">"/actual"</span>,
  <span class="s2">"absoluteUrl"</span>: <span class="s2">"http://localhost:8080/actual"</span>,
  <span class="s2">"method"</span>: <span class="s2">"GET"</span>,
  <span class="s2">"clientIp"</span>: <span class="s2">"0:0:0:0:0:0:0:1"</span>,
  <span class="s2">"headers"</span>: <span class="o">{</span>
    <span class="s2">"User-Agent"</span>: <span class="s2">"curl/7.30.0"</span>,
    <span class="s2">"Accept"</span>: <span class="s2">"*/*"</span>,
    <span class="s2">"Host"</span>: <span class="s2">"localhost:8080"</span>
  <span class="o">}</span>,
  <span class="s2">"cookies"</span>: <span class="o">{}</span>,
  <span class="s2">"browserProxyRequest"</span>: <span class="nb">false</span>,
  <span class="s2">"loggedDate"</span>: 1467402464520,
  <span class="s2">"bodyAsBase64"</span>: <span class="s2">""</span>,
  <span class="s2">"body"</span>: <span class="s2">""</span>,
  <span class="s2">"loggedDateString"</span>: <span class="s2">"2016-07-01T19:47:44Z"</span>
<span class="o">}</span>
</code></pre></div></div>

<p>will return a response like:</p>

<div class="language-json highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="p">{</span><span class="w">
    </span><span class="nl">"nearMisses"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
        </span><span class="p">{</span><span class="w">
            </span><span class="nl">"request"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
                </span><span class="nl">"url"</span><span class="p">:</span><span class="w"> </span><span class="s2">"/actual"</span><span class="p">,</span><span class="w">
                </span><span class="nl">"absoluteUrl"</span><span class="p">:</span><span class="w"> </span><span class="s2">"http://localhost:8080/nomatch"</span><span class="p">,</span><span class="w">
                </span><span class="nl">"method"</span><span class="p">:</span><span class="w"> </span><span class="s2">"GET"</span><span class="p">,</span><span class="w">
                </span><span class="nl">"clientIp"</span><span class="p">:</span><span class="w"> </span><span class="s2">"0:0:0:0:0:0:0:1"</span><span class="p">,</span><span class="w">
                </span><span class="nl">"headers"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
                    </span><span class="nl">"User-Agent"</span><span class="p">:</span><span class="w"> </span><span class="s2">"curl/7.30.0"</span><span class="p">,</span><span class="w">
                    </span><span class="nl">"Accept"</span><span class="p">:</span><span class="w"> </span><span class="s2">"*/*"</span><span class="p">,</span><span class="w">
                    </span><span class="nl">"Host"</span><span class="p">:</span><span class="w"> </span><span class="s2">"localhost:8080"</span><span class="w">
                </span><span class="p">},</span><span class="w">
                </span><span class="nl">"cookies"</span><span class="p">:</span><span class="w"> </span><span class="p">{},</span><span class="w">
                </span><span class="nl">"browserProxyRequest"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
                </span><span class="nl">"loggedDate"</span><span class="p">:</span><span class="w"> </span><span class="mi">1467402464520</span><span class="p">,</span><span class="w">
                </span><span class="nl">"bodyAsBase64"</span><span class="p">:</span><span class="w"> </span><span class="s2">""</span><span class="p">,</span><span class="w">
                </span><span class="nl">"body"</span><span class="p">:</span><span class="w"> </span><span class="s2">""</span><span class="p">,</span><span class="w">
                </span><span class="nl">"loggedDateString"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2016-07-01T19:47:44Z"</span><span class="w">
            </span><span class="p">},</span><span class="w">
            </span><span class="nl">"stubMapping"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
                </span><span class="nl">"uuid"</span><span class="p">:</span><span class="w"> </span><span class="s2">"42aedcf2-1f8d-4009-ac7b-9870e4ab2316"</span><span class="p">,</span><span class="w">
                </span><span class="nl">"request"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
                    </span><span class="nl">"url"</span><span class="p">:</span><span class="w"> </span><span class="s2">"/expected"</span><span class="p">,</span><span class="w">
                    </span><span class="nl">"method"</span><span class="p">:</span><span class="w"> </span><span class="s2">"GET"</span><span class="w">
                </span><span class="p">},</span><span class="w">
                </span><span class="nl">"response"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
                    </span><span class="nl">"status"</span><span class="p">:</span><span class="w"> </span><span class="mi">200</span><span class="w">
                </span><span class="p">}</span><span class="w">
            </span><span class="p">},</span><span class="w">
            </span><span class="nl">"matchResult"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
                </span><span class="nl">"distance"</span><span class="p">:</span><span class="w"> </span><span class="mf">0.12962962962962962</span><span class="w">
            </span><span class="p">}</span><span class="w">
        </span><span class="p">}</span><span class="w">
    </span><span class="p">]</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div></div>

<p>To find near misses representing stub mappings closest to the specified request in Java:</p>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nc">List</span><span class="o">&lt;</span><span class="nc">NearMiss</span><span class="o">&gt;</span> <span class="n">nearMisses</span> <span class="o">=</span> <span class="nc">WireMock</span><span class="o">.</span><span class="na">findNearMissesFor</span><span class="o">(</span>
    <span class="n">getRequestedFor</span><span class="o">(</span><span class="n">urlEqualTo</span><span class="o">(</span><span class="s">"/thing-url"</span><span class="o">))</span>
        <span class="o">.</span><span class="na">withRequestBody</span><span class="o">(</span><span class="n">containing</span><span class="o">(</span><span class="s">"thing"</span><span class="o">))</span>
<span class="o">);</span>
</code></pre></div></div>

<p>The equivalent via the HTTP API:</p>

<div class="language-bash highlighter-rouge"><div class="highlight"><pre class="highlight"><code>POST /__admin/near-misses/request-pattern

<span class="o">{</span>
    <span class="s2">"url"</span>: <span class="s2">"/almostmatch"</span>,
    <span class="s2">"method"</span>: <span class="s2">"GET"</span>
<span class="o">}</span>
</code></pre></div></div>

<p>will return a response like:</p>

<div class="language-json highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="p">{</span><span class="w">
    </span><span class="nl">"nearMisses"</span><span class="p">:</span><span class="w"> </span><span class="p">[</span><span class="w">
        </span><span class="p">{</span><span class="w">
            </span><span class="nl">"request"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
                </span><span class="nl">"url"</span><span class="p">:</span><span class="w"> </span><span class="s2">"/nomatch"</span><span class="p">,</span><span class="w">
                </span><span class="nl">"absoluteUrl"</span><span class="p">:</span><span class="w"> </span><span class="s2">"http://localhost:8080/nomatch"</span><span class="p">,</span><span class="w">
                </span><span class="nl">"method"</span><span class="p">:</span><span class="w"> </span><span class="s2">"GET"</span><span class="p">,</span><span class="w">
                </span><span class="nl">"clientIp"</span><span class="p">:</span><span class="w"> </span><span class="s2">"0:0:0:0:0:0:0:1"</span><span class="p">,</span><span class="w">
                </span><span class="nl">"headers"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
                    </span><span class="nl">"User-Agent"</span><span class="p">:</span><span class="w"> </span><span class="s2">"curl/7.30.0"</span><span class="p">,</span><span class="w">
                    </span><span class="nl">"Accept"</span><span class="p">:</span><span class="w"> </span><span class="s2">"*/*"</span><span class="p">,</span><span class="w">
                    </span><span class="nl">"Host"</span><span class="p">:</span><span class="w"> </span><span class="s2">"localhost:8080"</span><span class="w">
                </span><span class="p">},</span><span class="w">
                </span><span class="nl">"cookies"</span><span class="p">:</span><span class="w"> </span><span class="p">{},</span><span class="w">
                </span><span class="nl">"browserProxyRequest"</span><span class="p">:</span><span class="w"> </span><span class="kc">false</span><span class="p">,</span><span class="w">
                </span><span class="nl">"loggedDate"</span><span class="p">:</span><span class="w"> </span><span class="mi">1467402464520</span><span class="p">,</span><span class="w">
                </span><span class="nl">"bodyAsBase64"</span><span class="p">:</span><span class="w"> </span><span class="s2">""</span><span class="p">,</span><span class="w">
                </span><span class="nl">"body"</span><span class="p">:</span><span class="w"> </span><span class="s2">""</span><span class="p">,</span><span class="w">
                </span><span class="nl">"loggedDateString"</span><span class="p">:</span><span class="w"> </span><span class="s2">"2016-07-01T19:47:44Z"</span><span class="w">
            </span><span class="p">},</span><span class="w">
            </span><span class="nl">"requestPattern"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
                </span><span class="nl">"url"</span><span class="p">:</span><span class="w"> </span><span class="s2">"/almostmatch"</span><span class="p">,</span><span class="w">
                </span><span class="nl">"method"</span><span class="p">:</span><span class="w"> </span><span class="s2">"GET"</span><span class="w">
            </span><span class="p">},</span><span class="w">
            </span><span class="nl">"matchResult"</span><span class="p">:</span><span class="w"> </span><span class="p">{</span><span class="w">
                </span><span class="nl">"distance"</span><span class="p">:</span><span class="w"> </span><span class="mf">0.06944444444444445</span><span class="w">
            </span><span class="p">}</span><span class="w">
        </span><span class="p">}</span><span class="w">
    </span><span class="p">]</span><span class="w">
</span><span class="p">}</span><span class="w">
</span></code></pre></div></div>

<p>As a convenience you can also find the top 3 near misses for every unmatched request:</p>

<div class="language-java highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nc">List</span><span class="o">&lt;</span><span class="nc">NearMiss</span><span class="o">&gt;</span> <span class="n">nearMisses</span> <span class="o">=</span> <span class="nc">WireMock</span><span class="o">.</span><span class="na">findNearMissesForAllUnmatched</span><span class="o">();</span>
</code></pre></div></div>

<p>To do the same via the HTTP API, issue a <code class="language-plaintext highlighter-rouge">GET</code> to <code class="language-plaintext highlighter-rouge">/__admin/requests/unmatched/near-misses</code>, which will produce output of the same form as
for the query for near misses by request.</p>

        
      </section>

      <footer class="page__meta">
        
        




      </footer>

      
    </div>

    
  </article>

  
  
</div>


    <div class="page__footer">
      <footer>
        <!-- start custom footer snippets -->

<!-- end custom footer snippets -->
        

<div class="page__footer-copyright">
  <img src="https://wiremock.org/images/shortLogo.png" class="short-logo"/>

  <span class="footer-copyright-description">&copy; 2023</span>

  <ul class="footer-social-links">
      <li>
    <a href="http://github.com/wiremock" target="_blank">
      <img src="https://wiremock.org/images/githubIcon.svg" />
    </a>
  </li>

  </ul>
</div>

<script src="https://wiremock.org/assets/js/mobile-navbar.js"></script>
<script src="https://wiremock.org/assets/js/codeTab.js"></script>

<script src="https://wiremock.org/assets/js/sidebar-docs.js"></script>
<script src="https://wiremock.org/assets/js/tracking-events.js"></script>
<script src="https://wiremock.org/assets/js/faq.js"></script>

      </footer>
    </div>

    <script src="https://code.jquery.com/jquery-2.2.4.min.js" integrity="sha256-BbhdlvQf/xTY9gja0Dq3HiwQF8LaCRTXxZKRutelT44=" crossorigin="anonymous"></script>
    <script src="https://code.jquery.com/ui/1.11.4/jquery-ui.min.js" integrity="sha256-xNjb53/rY+WmG+4L6tTl9m6PpqknWZvRt0rO1SRnJzw=" crossorigin="anonymous"></script>
    <!-- <script src="https://wiremock.org/assets/js/main.min.js"></script> -->




  </body>
</html>

