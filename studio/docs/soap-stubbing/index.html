

<!doctype html>
<html lang="en" class="no-js">
  <head>
    

<meta charset="utf-8">



<!-- begin SEO -->



<!--  -->







<title>Working with SOAP | WireMock</title>







<meta name="description" content="Matching SOAP requests and sending SOAP responses">

<meta property="og:locale" content="en-US">
<meta property="og:site_name" content="WireMock">
<meta property="og:title" content="Working with SOAP">

<meta name="twitter:card" content="summary" />
<meta name="twitter:site" content="WireMock" />
<meta name="twitter:description" content="Matching SOAP requests and sending SOAP responses">


  <link rel="canonical" href="https://wiremock.org/studio/docs/soap-stubbing/">
  <meta property="og:url" content="https://wiremock.org/studio/docs/soap-stubbing/">



  <meta property="og:description" content="Matching SOAP requests and sending SOAP responses">





  

  





  <meta property="og:type" content="article">
  <meta property="article:published_time" content="2022-11-04T17:59:43+00:00">
  
    <link rel="next" href="https://wiremock.org/studio/docs/stateful-scenarios/" title="Simulating State with Scenarios">
  
  
    <link rel="prev" href="https://wiremock.org/studio/docs/simulating-faults/" title="Simulating Faults">
  





  <script type="application/ld+json">
    {
      "@context" : "http://schema.org",
      "@type" : "Person",
      "name" : "Tom Akehurst",
      "url" : "https://wiremock.org",
      "sameAs" : null
    }
  </script>






<!-- end SEO -->





  <!-- Google Analytics -->
<style>.async-hide { opacity: 0 !important} </style>
<!--<script>(function(a,s,y,n,c,h,i,d,e){s.className+=' '+y;h.start=1*new Date;-->
  <!--h.end=i=function(){s.className=s.className.replace(RegExp(' ?'+y),'')};-->
  <!--(a[n]=a[n]||[]).hide=h;setTimeout(function(){i();h.end=null},c);h.timeout=c;-->
<!--})(window,document.documentElement,'async-hide','dataLayer',4000,-->
  <!--{'GTM-WQTGSSM':true});</script>-->

<script>
  (function(i,s,o,g,r,a,m){i['GoogleAnalyticsObject']=r;i[r]=i[r]||function(){
      (i[r].q=i[r].q||[]).push(arguments)},i[r].l=1*new Date();a=s.createElement(o),
    m=s.getElementsByTagName(o)[0];a.async=1;a.src=g;m.parentNode.insertBefore(a,m)
  })(window,document,'script','https://www.google-analytics.com/analytics.js','ga');

  ga('create', 'UA-36386229-2', 'auto');
  ga('require', 'GTM-WQTGSSM');
  ga('send', 'pageview');
</script>
<!-- End Google Analytics -->



<script>
    (function(h,o,t,j,a,r){
        h.hj=h.hj||function(){(h.hj.q=h.hj.q||[]).push(arguments)};
        h._hjSettings={hjid:2905132,hjsv:6};
        a=o.getElementsByTagName('head')[0];
        r=o.createElement('script');r.async=1;
        r.src=t+h._hjSettings.hjid+j+h._hjSettings.hjsv;
        a.appendChild(r);
    })(window,document,'https://static.hotjar.com/c/hotjar-','.js?sv=');
</script>

<script>
    (function(c,l,a,r,i,t,y){
        c[a]=c[a]||function(){(c[a].q=c[a].q||[]).push(arguments)};
        t=l.createElement(r);t.async=1;t.src="https://www.clarity.ms/tag/"+i+"?ref=bwt";
        y=l.getElementsByTagName(r)[0];y.parentNode.insertBefore(t,y);
    })(window, document, "clarity", "script", "e4hf2fljrd");
</script>


<link href="https://wiremock.org/feed.xml" type="application/atom+xml" rel="alternate" title="WireMock Feed">

<!-- http://t.co/dKP3o1e -->
<meta name="HandheldFriendly" content="True">
<meta name="MobileOptimized" content="320">
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<script>
  document.documentElement.className = document.documentElement.className.replace(/\bno-js\b/g, '') + ' js ';
</script>

<link href="https://fonts.googleapis.com/css?family=Lato|Source+Code+Pro|Cairo" rel="stylesheet">
<link rel="preconnect" href="https://fonts.googleapis.com">
<link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
<link href="https://fonts.googleapis.com/css2?family=Montserrat:wght@400;500;600;700;800&family=Open+Sans:wght@300;400;500;600;700;800&family=Roboto:wght@400;500;700&family=Ubuntu:wght@400;500;700&display=swap" rel="stylesheet">

<!-- For all browsers -->
<link rel="stylesheet" href="https://wiremock.org/assets/css/main.css">

<meta http-equiv="cleartype" content="on">

<link rel="shortcut icon" type="image/x-icon" href="https://wiremock.org/images/favicon.svg">

    <!-- start custom head snippets -->

<!-- insert favicons. use http://realfavicongenerator.net/ -->

<!-- end custom head snippets -->
  </head>

  <body>
    <!--[if lt IE 9]>
<div class="notice--danger align-center" style="margin: 0;">You are using an <strong>outdated</strong> browser. Please <a href="http://browsehappy.com/">upgrade your browser</a> to improve your experience.</div>
<![endif]-->
    

<style>
  .navlink {
    position: relative !important;
    color: #7d93bd;
    padding-bottom: 0.9rem;
    cursor: pointer;
    font-family: "Ubuntu";
    font-style: normal;
    font-weight: 400;
    font-size: 14px;
  }

  .divSubNav {
    position: relative;
    cursor: default;
    padding: 10px 15px;
    display: none;
    position: absolute;
    content: "";
    left: 0;
    top: 32px;
    width: fit-content;
    background: #FFFFFF;
    box-shadow: 0px -5px 20px rgba(210, 223, 249, 0.5);
  }

  .divSubNav::before {
    position: absolute;
    content: "";
    left: 15px;
    width: 0; 
    height: 0; 
    border-left: 5px solid transparent;
    border-right: 5px solid transparent;
    border-bottom: 7px solid #fff;
    top: -7px;
  }

  .divSubNav a {
    padding: 0 !important;
    margin: 0 0 5px 0;
    width: fit-content !important;
  }

  .divSubNav a:last-child {
    margin-bottom: 0;
  }

  .divSubNav a::before {
    background: none !important;
    
  }

  .navlink:hover > .divSubNav {
    display: block;
  }

  .navlink::before {
    background: unset !important;
  }
  .navHover::before {
    background: unset !important;
  }
</style>

<div class="masthead">
  <div class="masthead__inner-wrap">
    <div class="masthead__menu">
      <a href="/"><img src="https://wiremock.org/images/wireMockLogo.png" style="width: 160px; height: 20px" /></a>
      <nav id="site-nav" class="greedy-nav">
        <!-- <button><div class="navicon"></div></button> -->
        <ul class="visible-links">
          
          
            

            

            
            
            <li class="masthead__menu-item">
              
                <span class="navlink">
                  Docs

                  
                  <div class="divSubNav">
                    
                      <a href="/docs/">
                        WireMock Open Source
                      </a>
                    
                      <a href="/studio/docs/">
                        WireMock Studio
                      </a>
                    
                      <a href="https://www.mocklab.io/docs/getting-started/?utm_source=wiremock.org&utm_medium=masthead_doc-links&utm_campaign=2022_baseline">
                        MockLab
                      </a>
                    
                  </div>
                  
                </span>
              
              
            </li>
            
            

          
            

            

            
            
            <li class="masthead__menu-item">
              
                <a class="base_path navHover" href="https://wiremock.org/support" title="Support">
                  Support
                </a>
              
              
            </li>
            
            

          
            

            

            
            
            <li class="masthead__menu-item">
              
                <span class="navlink">
                  Community

                  
                  <div class="divSubNav">
                    
                      <a href="https://github.com/wiremock/wiremock">
                        GitHub
                      </a>
                    
                      <a href="https://github.com/wiremock/wiremock/blob/master/CONTRIBUTING.md">
                        Contributing
                      </a>
                    
                      <a href="/external-resources">
                        Resources
                      </a>
                    
                  </div>
                  
                </span>
              
              
            </li>
            
            

          

          <li class="masthead__menu-item">
            <a class="navHover" href="https://get.mocklab.io?utm_source=wiremock.org&utm_medium=masthead&utm_campaign=homepage_2022_baseline" title="MockLab">
              <img src="/images/mocklab_logo_transparent.png" alt="MockLab logo" style="vertical-align: top;height: 20px;margin-right: 2px;"/>
              MockLab
            </a>
          </li>
        </ul>
        
      </nav>
      
      <img id="hamburgerMenuIcon" class="hamburgerMenuIcon" src="https://wiremock.org/images/hamburgerMenuIcon.svg" />
      <div id="overlay-menu" class="overlay-menu"></div>
      <div class="mobile-menu-wrapper">
        <img id="closeMenuIcon" class="closeMenuIcon" src="https://wiremock.org/images/closeMenuIcon.svg" />
        <ul>
          <li><a href="/docs">Open Source docs</a></li>
          <li><a href="/studio/docs">Studio docs</a></li>
          <li>
              <a href="https://get.mocklab.io?utm_source=wiremock.org&utm_medium=masthead&utm_campaign=homepage_2022_baseline" title="MockLab">
              <img src="/images/mocklab_logo_transparent.png" alt="MockLab logo" style="vertical-align: top;height: 20px;margin-right: 2px;"/>
              MockLab
            </a>
          </li>
          <li><a href="/support">Support</a></li>
          <li><a href="https://github.com/wiremock/wiremock" target="_blank">GitHub</a></li>
          <li><a href="https://github.com/wiremock/wiremock/blob/master/CONTRIBUTING.md" target="_blank">Contributing</a></li>
          <li><a href="/external-resources">Resources</a></li>
        </ul>
      </div>
    </div>
  </div>
</div>


    

<div id="main" class="custom-doc-wrapper" role="main">

  
    

<div class="sidebar">
  <nav class="nav__list">
    <ul class="doc-categories">
      
        
        <li class="doc-category">
          <span class="doc-category__title">Getting Started</span>
          <ul
           class="
           doc-category__sub-nav
           
           ">
            
              
              
              

              <li class="doc-category__li">
                <a href="/studio/docs/getting-started/desktop/">Desktop</a>
              </li>
            
              
              
              

              <li class="doc-category__li">
                <a href="/studio/docs/getting-started/docker/">Docker</a>
              </li>
            
              
              
              

              <li class="doc-category__li">
                <a href="/studio/docs/getting-started/kubernetes/">Kubernetes</a>
              </li>
            
          </ul>
        </li>
      
        
        <li class="doc-category">
          <span class="doc-category__title">Stubbing</span>
          <ul
           class="
           doc-category__sub-nav
           doc-category__sub-nav--active
           ">
            
              
              
              

              <li class="doc-category__li">
                <a href="/studio/docs/stubbing/"> Basics</a>
              </li>
            
              
              
              

              <li class="doc-category__li">
                <a href="/studio/docs/advanced-stubbing/">Advanced </a>
              </li>
            
              
              
              

              <li class="doc-category__li">
                <a href="/studio/docs/delays/">Response Delays</a>
              </li>
            
              
              
              

              <li class="doc-category__li">
                <a href="/studio/docs/simulating-faults/">Simulating Faults</a>
              </li>
            
              
              
              

              <li class="doc-category__li">
                <a href="/studio/docs/stateful-scenarios/">Simulating State with Scenarios</a>
              </li>
            
              
              
              

              <li class="doc-category__li">
                <a href="/studio/docs/proxying/">Proxying</a>
              </li>
            
              
              
              

              <li class="doc-category__li doc-category__li--selected">
                <a href="/studio/docs/soap-stubbing/">Working with SOAP</a>
              </li>
            
          </ul>
        </li>
      
        
        <li class="doc-category">
          <span class="doc-category__title">Request Matching</span>
          <ul
           class="
           doc-category__sub-nav
           
           ">
            
              
              
              

              <li class="doc-category__li">
                <a href="/studio/docs/request-matching/matcher-types/">Overview of Matcher Types</a>
              </li>
            
              
              
              

              <li class="doc-category__li">
                <a href="/studio/docs/request-matching/url/">Matching URLs</a>
              </li>
            
              
              
              

              <li class="doc-category__li">
                <a href="/studio/docs/request-matching/json/">Matching JSON requests</a>
              </li>
            
              
              
              

              <li class="doc-category__li">
                <a href="/studio/docs/request-matching/xml/">Matching XML bodies</a>
              </li>
            
          </ul>
        </li>
      
        
        <li class="doc-category">
          <span class="doc-category__title">Response Templating</span>
          <ul
           class="
           doc-category__sub-nav
           
           ">
            
              
              
              

              <li class="doc-category__li">
                <a href="/studio/docs/response-templating/basics/">Basics</a>
              </li>
            
              
              
              

              <li class="doc-category__li">
                <a href="/studio/docs/response-templating/conditional-logic-and-iteration/">Conditional Logic and Iteration</a>
              </li>
            
              
              
              

              <li class="doc-category__li">
                <a href="/studio/docs/response-templating/string-helpers/">String Helpers</a>
              </li>
            
              
              
              

              <li class="doc-category__li">
                <a href="/studio/docs/response-templating/string-encodings/">String Encodings</a>
              </li>
            
              
              
              

              <li class="doc-category__li">
                <a href="/studio/docs/response-templating/number-helpers/">Number Helpers</a>
              </li>
            
              
              
              

              <li class="doc-category__li">
                <a href="/studio/docs/response-templating/dates-and-times/">Dates and Times</a>
              </li>
            
              
              
              

              <li class="doc-category__li">
                <a href="/studio/docs/response-templating/random-values/">Random Values</a>
              </li>
            
              
              
              

              <li class="doc-category__li">
                <a href="/studio/docs/response-templating/xml/">Working with XML</a>
              </li>
            
              
              
              

              <li class="doc-category__li">
                <a href="/studio/docs/response-templating/json/">Working with JSON</a>
              </li>
            
              
              
              

              <li class="doc-category__li">
                <a href="/studio/docs/response-templating/jwt/">JSON Web Tokens (JWT)</a>
              </li>
            
              
              
              

              <li class="doc-category__li">
                <a href="/studio/docs/response-templating/misc-helpers/">Miscellaneous Helpers</a>
              </li>
            
          </ul>
        </li>
      
        
        <li class="doc-category">
          <span class="doc-category__title">Import & Export</span>
          <ul
           class="
           doc-category__sub-nav
           
           ">
            
              
              
              

              <li class="doc-category__li">
                <a href="/studio/docs/import-and-export/">Overview</a>
              </li>
            
              
              
              

              <li class="doc-category__li">
                <a href="/studio/docs/import-export/wiremock/">WireMock</a>
              </li>
            
              
              
              

              <li class="doc-category__li">
                <a href="/studio/docs/swagger/">Swagger and OpenAPI</a>
              </li>
            
              
              
              

              <li class="doc-category__li">
                <a href="/studio/docs/import-export/postman/">Postman</a>
              </li>
            
              
              
              

              <li class="doc-category__li">
                <a href="/studio/docs/import-export/api/">Via the API</a>
              </li>
            
          </ul>
        </li>
      
        
        <li class="doc-category">
          <span class="doc-category__title">Record & Playback</span>
          <ul
           class="
           doc-category__sub-nav
           
           ">
            
              
              
              

              <li class="doc-category__li">
                <a href="/studio/docs/recording-stubs/">Recording Stubs</a>
              </li>
            
          </ul>
        </li>
      
        
        <li class="doc-category">
          <span class="doc-category__title">Tutorials</span>
          <ul
           class="
           doc-category__sub-nav
           
           ">
            
              
              
              

              <li class="doc-category__li">
                <a href="/studio/docs/mock-rest-api/">How to build a mock REST API</a>
              </li>
            
              
              
              

              <li class="doc-category__li">
                <a href="/studio/docs/exploratory-testing-tutorial/">Exploratory Testing a Spring Boot App</a>
              </li>
            
              
              
              

              <li class="doc-category__li">
                <a href="/studio/docs/automated-testing-with-java/">Automated Testing with Java</a>
              </li>
            
              
              
              

              <li class="doc-category__li">
                <a href="/studio/docs/default-responses/">Serving a Default Response</a>
              </li>
            
              
              
              

              <li class="doc-category__li">
                <a href=""></a>
              </li>
            
          </ul>
        </li>
      
    </ul>

  </nav>
</div>

  

  

  <article class="page" itemscope itemtype="http://schema.org/CreativeWork">
    
    <meta itemprop="description" content="Stubbing a SOAP response is similar in most respects to stubbing a REST response. The main difference is that the HTTP methodand URL alone are not enough to differentiate requests since these are always the same for a given endpoint.">
    <meta itemprop="datePublished" content="November 04, 2022">
    

    <meta itemprop="headline" content="zzzz">

    <div class="page__inner-wrap">
      <header>
        <h1 class="page__title" itemprop="headline">Working with SOAP
</h1>
      </header>

      <section class="page__content" itemprop="text">
        <p>Stubbing a SOAP response is similar in most respects to stubbing a REST response. The main difference is that the HTTP method
and URL alone are not enough to differentiate requests since these are always the same for a given endpoint.</p>

<p>In addition, we need to match on the <code class="language-plaintext highlighter-rouge">SOAPAction</code> header and the request body XML.</p>

<h2 id="using-the-soapaction-header">Using the SOAPAction header</h2>

<p>SOAP APIs typically use the <code class="language-plaintext highlighter-rouge">SOAPAction</code> header to select the appropriate action for the call.
Although you can sometimes avoid this, it’s usually a good idea to add a header match for <code class="language-plaintext highlighter-rouge">SOAPAction</code> as it’s more
efficient and faster than relying exclusively on the XML body.</p>

<p><img src="/images/screenshots/soap-action-header.png" title="Matching the SOAPAction header" /></p>

<h2 id="matching-the-request-body-with-xml-equality">Matching the request body with XML equality</h2>

<p>When dealing with request bodies that are small and have no data of a transient nature (e.g. transaction IDs or today’s date)
<code class="language-plaintext highlighter-rouge">equalToXml</code> is a straightforward way to specify a match.</p>

<p>For instance given a SOAP service for managing a to do list, you may wish to mock an interaction matching a specific request to add an item:</p>

<p><img src="/images/screenshots/soap-request.png" title="SOAP request" /></p>

<p>Which returns a success response:
<img src="/images/screenshots/soap-response.png" title="SOAP response" /></p>

<p>Testing this returns the expected XML response:</p>

<div class="language-plaintext highlighter-rouge"><div class="highlight"><pre class="highlight"><code>$ curl -X POST -d '&lt;?xml version="1.0"?&gt;
&lt;soap-env:Envelope xmlns:soap-env="http://www.w3.org/2001/12/soap-envelope" soap-env:encodingStyle="http://www.w3.org/2001/12/soap-encoding"&gt;

   &lt;soap-env:Body xmlns:m="http://example.company/todo" &gt;
      &lt;m:AddToDoItem&gt;
         &lt;m:ToDoItem&gt;Have a wash&lt;/m:ToDoItem&gt;
      &lt;/m:AddToDoItem&gt;
   &lt;/soap-env:Body&gt;

&lt;/soap-env:Envelope&gt;' -H 'SOAPAction: "http://example.company/todo/AddToDoItem"' http://localhost:8000/soap-example -v

&gt; POST /soap-example HTTP/1.1
&gt; Host: localhost:8000
&gt; User-Agent: curl/7.54.0
&gt; Accept: */*
&gt; SOAPAction: "http://example.company/todo/AddToDoItem"
&gt; Content-Length: 355
&gt; Content-Type: application/x-www-form-urlencoded
&gt;
* upload completely sent off: 355 out of 355 bytes
&lt; HTTP/1.1 200 OK
&lt; Transfer-Encoding: chunked
&lt;
&lt;?xml version="1.0"?&gt;
&lt;soap-env:Envelope xmlns:soap-env="http://www.w3.org/2001/12/soap-envelope" soap-env:encodingStyle="http://www.w3.org/2001/12/soap-encoding"&gt;

   &lt;soap-env:Body xmlns:m="http://example.company/todo" &gt;
      &lt;m:AddToDoResult&gt;Item "Have a wash" successfully added&lt;/m:AddToDoResult&gt;
   &lt;/soap-env:Body&gt;

&lt;/soap-env:Envelope&gt;
</code></pre></div></div>

<h3 id="using-placeholders-to-ignore-transient-values">Using placeholders to ignore transient values</h3>

<p>The above example works fine when the request body doesn’t contain any transient data
such as transaction IDs or the current date. However, if data that changes on each
request is introduced it will be necessary allow a match to occur regardless of the
actual value received.</p>

<p>One way to do this is to use <a href="/studio/docs/advanced-stubbing/#xml-placeholders">placeholders</a>.
Let’s assume the request body of our API now contains a <code class="language-plaintext highlighter-rouge">TransactionId</code> element, which
must be a unique value for each request e.g.:</p>

<div class="language-xml highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="cp">&lt;?xml version="1.0"?&gt;</span>
<span class="nt">&lt;soap-env:Envelope</span> <span class="na">xmlns:soap-env=</span><span class="s">"http://www.w3.org/2001/12/soap-envelope"</span>
  <span class="na">soap-env:encodingStyle=</span><span class="s">"http://www.w3.org/2001/12/soap-encoding"</span><span class="nt">&gt;</span>

   <span class="nt">&lt;soap-env:Body</span> <span class="na">xmlns:m=</span><span class="s">"http://example.company/todo"</span><span class="nt">&gt;</span>
      <span class="nt">&lt;m:TransactionId&gt;</span>1ea094dd-9548-4a79-a43c-b44670f955c6<span class="nt">&lt;/m:TransactionId&gt;</span>
      <span class="nt">&lt;m:AddToDoItem&gt;</span>
         <span class="nt">&lt;m:ToDoItem&gt;</span>Have a wash<span class="nt">&lt;/m:ToDoItem&gt;</span>
      <span class="nt">&lt;/m:AddToDoItem&gt;</span>
   <span class="nt">&lt;/soap-env:Body&gt;</span>

<span class="nt">&lt;/soap-env:Envelope&gt;</span>
</code></pre></div></div>

<p>We can ignore this value by ticking the “Enable XMLUnit placeholders” box and
putting an ignore token into the expected XML in the form:</p>

<div class="language-xml highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="nt">&lt;m:TransactionId&gt;</span>${xmlunit.ignore}<span class="nt">&lt;/m:TransactionId&gt;</span>
</code></pre></div></div>

<p><img src="/images/screenshots/soap-placeholders.png" title="SOAP request XML with placeholders" /></p>

<h2 id="matching-the-request-body-with-xpath">Matching the request body with XPath</h2>

<p>When working with large SOAP requests <code class="language-plaintext highlighter-rouge">equalToXml</code> can become quite slow as it must perform a comparison on every node in the XML document.</p>

<p>It’s often faster to match specific elements within the document using the <code class="language-plaintext highlighter-rouge">matchesXPath</code> operator,
and since this is a much looser approach to matching it’s another way to solve
the problem described above where frequently changing values are present.</p>

<p>When matching using XPath, your aim should be to target as few elements/attributes as possible while being able
to reliably distinguish between requests.</p>

<p>Given the same request body as in the previous section, we could use the following
XPath to match just on the value of the <code class="language-plaintext highlighter-rouge">m:ToDoItem</code> element:</p>

<div class="language-xpath highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="o">//</span><span class="nt">AddToDoItem</span><span class="o">/</span><span class="nt">ToDoItem</span><span class="p">[</span><span class="k">text</span><span class="p">()</span><span class="o">=</span><span class="s">'Have a wash'</span><span class="p">]</span><span class="w">
</span></code></pre></div></div>

<p><img src="/images/screenshots/xpath-soap-match.png" title="Matching with XPath" /></p>

<h3 id="using-multiple-xpath-expressions">Using multiple XPath expressions</h3>

<p>Sometimes you need to match on more than one XML element to be able to adequately
distinguish between requests. Although XPath supports multiple predicates with logical and/or,
often it can be easier to use multiple body matchers each targetting a single element.</p>

<p>Suppose we added a <code class="language-plaintext highlighter-rouge">UserId</code> field that we also wanted to target:</p>

<div class="language-xml highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="cp">&lt;?xml version="1.0"?&gt;</span>
<span class="nt">&lt;soap-env:Envelope</span> <span class="na">xmlns:soap-env=</span><span class="s">"http://www.w3.org/2001/12/soap-envelope"</span>
  <span class="na">soap-env:encodingStyle=</span><span class="s">"http://www.w3.org/2001/12/soap-encoding"</span><span class="nt">&gt;</span>

   <span class="nt">&lt;soap-env:Body</span> <span class="na">xmlns:m=</span><span class="s">"http://example.company/todo"</span><span class="nt">&gt;</span>
      <span class="nt">&lt;m:TransactionId&gt;</span>1ea094dd-9548-4a79-a43c-b44670f955c6<span class="nt">&lt;/m:TransactionId&gt;</span>
      <span class="nt">&lt;m:UserId&gt;</span>abc123<span class="nt">&lt;/m:UserId&gt;</span>
      <span class="nt">&lt;m:AddToDoItem&gt;</span>
         <span class="nt">&lt;m:ToDoItem&gt;</span>Have a wash<span class="nt">&lt;/m:ToDoItem&gt;</span>
      <span class="nt">&lt;/m:AddToDoItem&gt;</span>
   <span class="nt">&lt;/soap-env:Body&gt;</span>

<span class="nt">&lt;/soap-env:Envelope&gt;</span>
</code></pre></div></div>

<p>We could add one <code class="language-plaintext highlighter-rouge">matchesXPath</code> body pattern for each of the elements we
care about:</p>

<p><img src="/images/screenshots/multiple-xpath-soap-match.png" title="Matching with multiple XPaths" /></p>

<h3 id="a-gotcha---the-recursive-selector-">A gotcha - the recursive selector: //</h3>

<p>Given the above XML document, you might expect the following XPath expression to
produce a match:</p>

<div class="language-xpath highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="o">//</span><span class="nt">UserId</span><span class="p">[</span><span class="k">text</span><span class="p">()</span><span class="o">=</span><span class="s">'abc123'</span><span class="p">]</span><span class="w">
</span></code></pre></div></div>

<p>However, due to a quirk of how XML documents with namespaces are evaluated this won’t work.
Ensuring that you select at least one node beneath the element searched for recursively
will fix this, so the above XPath can be corrected like this:</p>

<div class="language-xpath highlighter-rouge"><div class="highlight"><pre class="highlight"><code><span class="o">//</span><span class="nt">UserId</span><span class="o">/</span><span class="k">text</span><span class="p">()[</span><span class="o">.=</span><span class="s">'abc123'</span><span class="p">]</span><span class="w">
</span></code></pre></div></div>

        
      </section>

      <footer class="page__meta">
        
        




      </footer>

      
    </div>

    
  </article>

  
  
</div>


    <div class="page__footer">
      <footer>
        <!-- start custom footer snippets -->

<!-- end custom footer snippets -->
        

<div class="page__footer-copyright">
  <img src="https://wiremock.org/images/shortLogo.png" class="short-logo"/>

  <span class="footer-copyright-description">&copy; 2022</span>

  <ul class="footer-social-links">
      <li>
    <a href="http://github.com/wiremock" target="_blank">
      <img src="https://wiremock.org/images/githubIcon.svg" />
    </a>
  </li>

  </ul>
</div>

<script src="https://wiremock.org/assets/js/mobile-navbar.js"></script>
<script src="https://wiremock.org/assets/js/codeTab.js"></script>

<script src="https://wiremock.org/assets/js/sidebar-docs.js"></script>
<script src="https://wiremock.org/assets/js/tracking-events.js"></script>
<script src="https://wiremock.org/assets/js/faq.js"></script>

      </footer>
    </div>

    <script src="https://code.jquery.com/jquery-2.2.4.min.js" integrity="sha256-BbhdlvQf/xTY9gja0Dq3HiwQF8LaCRTXxZKRutelT44=" crossorigin="anonymous"></script>
    <script src="https://code.jquery.com/ui/1.11.4/jquery-ui.min.js" integrity="sha256-xNjb53/rY+WmG+4L6tTl9m6PpqknWZvRt0rO1SRnJzw=" crossorigin="anonymous"></script>
    <!-- <script src="https://wiremock.org/assets/js/main.min.js"></script> -->




  </body>
</html>

